<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3290. æœ€é«˜ä¹˜æ³•å¾—åˆ† - LeetCode</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <div class="top-bar">
        <button class="menu-button" onclick="history.back()" aria-label="è¿”å›">
            <div class="menu-icon">
                <span style="transform: rotate(-45deg) translateY(-2px);"></span>
                <span style="transform: rotate(45deg) translateY(2px);"></span>
            </div>
        </button>
        <div class="logo">
            <span class="logo-emoji">ğŸ“š</span>
            LeetCode æ¯æ—¥é¢˜ç›®
        </div>
        <div class="update-time">2026-02-26 03:00:00</div>
    </div>

    <!-- ä¸»å†…å®¹åŒº -->
    <div class="main-content" style="margin-left: 0;">
        <div class="content-wrapper">
            <button class="back-button" onclick="history.back()">
                â† è¿”å›é¢˜ç›®åˆ—è¡¨
            </button>

            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">3290. æœ€é«˜ä¹˜æ³•å¾—åˆ†</span>
                    <span class="difficulty-badge difficulty-medium">
                        ä¸­ç­‰
                    </span>
                    <a href="https://leetcode.cn/problems/maximum-multiplication-score/" target="_blank" class="question-link">åœ¨ LeetCode æ‰“å¼€</a>
                </div>
                <div class="markdown-content">
                    <h1 id="3290-æœ€é«˜ä¹˜æ³•å¾—åˆ†">3290. æœ€é«˜ä¹˜æ³•å¾—åˆ†</h1>

<p><strong>éš¾åº¦</strong>: Medium</p>

<p><strong>æ ‡ç­¾</strong>: æ•°ç»„, åŠ¨æ€è§„åˆ’</p>

<p><strong>é“¾æ¥</strong>: https://leetcode.cn/problems/maximum-multiplication-score/</p>

<hr />

<h2 id="é¢˜ç›®æè¿°">é¢˜ç›®æè¿°</h2>

<p>ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º 4 çš„æ•´æ•°æ•°ç»„ <code>a</code> å’Œä¸€ä¸ªå¤§å° <strong>è‡³å°‘</strong>ä¸º 4 çš„æ•´æ•°æ•°ç»„ <code>b</code>ã€‚</p>

<p>ä½ éœ€è¦ä»æ•°ç»„ <code>b</code> ä¸­é€‰æ‹©å››ä¸ªä¸‹æ ‡ <code>i<sub>0</sub></code>, <code>i<sub>1</sub></code>, <code>i<sub>2</sub></code>, å’Œ <code>i<sub>3</sub></code>ï¼Œå¹¶æ»¡è¶³ <code>i<sub>0</sub> &lt; i<sub>1</sub> &lt; i<sub>2</sub> &lt; i<sub>3</sub></code>ã€‚ä½ çš„å¾—åˆ†å°†æ˜¯ <code>a[0] * b[i<sub>0</sub>] + a[1] * b[i<sub>1</sub>] + a[2] * b[i<sub>2</sub>] + a[3] * b[i<sub>3</sub>]</code> çš„å€¼ã€‚</p>

<p>è¿”å›ä½ èƒ½å¤Ÿè·å¾—çš„ <strong>æœ€å¤§ </strong>å¾—åˆ†ã€‚</p>

<p>&nbsp;</p>

<p><strong class="example">ç¤ºä¾‹ 1ï¼š</strong></p>

<div class="example-block">
<p><strong>è¾“å…¥ï¼š</strong> <span class="example-io">a = [3,2,5,6], b = [2,-6,4,-5,-3,2,-7]</span></p>

<p><strong>è¾“å‡ºï¼š</strong> <span class="example-io">26</span></p>

<p><strong>è§£é‡Šï¼š</strong><br />
é€‰æ‹©ä¸‹æ ‡ 0, 1, 2 å’Œ 5ã€‚å¾—åˆ†ä¸º <code>3 * 2 + 2 * (-6) + 5 * 4 + 6 * 2 = 26</code>ã€‚</p>
</div>

<p><strong class="example">ç¤ºä¾‹ 2ï¼š</strong></p>

<div class="example-block">
<p><strong>è¾“å…¥ï¼š</strong> <span class="example-io">a = [-1,4,5,-2], b = [-5,-1,-3,-2,-4]</span></p>

<p><strong>è¾“å‡ºï¼š</strong> <span class="example-io">-1</span></p>

<p><strong>è§£é‡Šï¼š</strong><br />
é€‰æ‹©ä¸‹æ ‡ 0, 1, 3 å’Œ 4ã€‚å¾—åˆ†ä¸º <code>(-1) * (-5) + 4 * (-1) + 5 * (-2) + (-2) * (-4) = -1</code>ã€‚</p>
</div>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
    <li><code>a.length == 4</code></li>
    <li><code>4 &lt;= b.length &lt;= 10<sup>5</sup></code></li>
    <li><code>-10<sup>5</sup> &lt;= a[i], b[i] &lt;= 10<sup>5</sup></code></li>
</ul>

<hr />

<h2 id="ä»£ç æ¨¡æ¿">ä»£ç æ¨¡æ¿</h2>

<h3 id="c">C++</h3>

<pre><code>class Solution {
public:
    long long maxScore(vector&lt;int&gt;&amp; a, vector&lt;int&gt;&amp; b) {

    }
};
</code></pre>

<h3 id="java">Java</h3>

<pre><code>class Solution {
    public long maxScore(int[] a, int[] b) {

    }
}
</code></pre>

<h3 id="python3">Python3</h3>

<pre><code>class Solution:
    def maxScore(self, a: List[int], b: List[int]) -&gt; int:

</code></pre>

<h3 id="javascript">JavaScript</h3>

<pre><code>/**
 * @param {number[]} a
 * @param {number[]} b
 * @return {number}
 */
var maxScore = function(a, b) {

};
</code></pre>

<h3 id="go">Go</h3>

<pre><code>func maxScore(a []int, b []int) int64 {

}
</code></pre>

<hr />

<h2 id="æç¤º">æç¤º</h2>

<ol>
<li>Try using dynamic programming.</li>
<li>Consider a dp with the following states: The current position in the array b, and the number of indices considered.</li>
</ol>

<hr />

<h2 id="ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹">ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹</h2>

<pre><code>[3,2,5,6]
[2,-6,4,-5,-3,2,-7]
</code></pre>

<hr />

<h2 id="ai-è§£ç­”-deepseek">AI è§£ç­” (DeepSeek)</h2>

<h2 id="é¢˜ç›®åˆ†æ">é¢˜ç›®åˆ†æ</h2>

<p>æˆ‘ä»¬éœ€è¦ä»æ•°ç»„ <code>b</code> ä¸­é€‰æ‹© 4 ä¸ªç´¢å¼•ï¼ˆä¿æŒé¡ºåºï¼‰ï¼Œä¸å›ºå®šé•¿åº¦ä¸º 4 çš„æ•°ç»„ <code>a</code> å¯¹åº”ç›¸ä¹˜æ±‚å’Œï¼Œä½¿å¾—å¾—åˆ†æœ€å¤§ã€‚</p>

<p><strong>å…³é”®çº¦æŸ</strong>ï¼š
- <code>a</code> é•¿åº¦å›ºå®šä¸º 4
- <code>b</code> é•¿åº¦ <code>n â‰¥ 4</code>
- é€‰æ‹©çš„ 4 ä¸ªç´¢å¼•å¿…é¡»ä¸¥æ ¼é€’å¢ï¼š<code>i0 &lt; i1 &lt; i2 &lt; i3</code>
- ç›®æ ‡æ˜¯æœ€å¤§åŒ–ï¼š<code>a[0]*b[i0] + a[1]*b[i1] + a[2]*b[i2] + a[3]*b[i3]</code></p>

<hr />

<h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2>

<h3 id="æ€è·¯ä¸€åŠ¨æ€è§„åˆ’4-é˜¶æ®µ-dp">æ€è·¯ä¸€ï¼šåŠ¨æ€è§„åˆ’ï¼ˆ4 é˜¶æ®µ DPï¼‰</h3>

<p>å°†é—®é¢˜çœ‹ä½œåœ¨ <code>b</code> ä¸­æŒ‰é¡ºåºé€‰æ‹© 4 ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªé˜¶æ®µå¯¹åº”ä¸€ä¸ª <code>a[k]</code>ã€‚<br />
å®šä¹‰ <code>dp[k][i]</code> è¡¨ç¤ºä» <code>b[0..i]</code> ä¸­é€‰æ‹© <code>k+1</code> ä¸ªå…ƒç´ ï¼ˆå¯¹åº” <code>a[0..k]</code>ï¼‰çš„æœ€å¤§å¾—åˆ†ã€‚<br />
è½¬ç§»æ–¹ç¨‹ï¼š</p>

<pre><code>dp[k][i] = max(dp[k][i-1], dp[k-1][i-1] + a[k] * b[i])
</code></pre>

<p>å…¶ä¸­ <code>k = 0..3</code>ï¼Œ<code>i â‰¥ k</code>ï¼ˆå› ä¸ºè‡³å°‘éœ€è¦ k+1 ä¸ªå…ƒç´ ï¼‰ã€‚<br />
æœ€ç»ˆç­”æ¡ˆï¼š<code>dp[3][n-1]</code>ã€‚</p>

<p><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(4n) = O(n)<br />
<strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(4n) = O(n)ï¼Œå¯ä¼˜åŒ–åˆ° O(1)ï¼ˆæ»šåŠ¨æ•°ç»„ï¼‰</p>

<hr />

<h3 id="æ€è·¯äºŒåˆ†é˜¶æ®µè´ªå¿ƒåŸºäº-a-çš„ç¬¦å·">æ€è·¯äºŒï¼šåˆ†é˜¶æ®µè´ªå¿ƒï¼ˆåŸºäº a çš„ç¬¦å·ï¼‰</h3>

<p>ç”±äº <code>a</code> å›ºå®šä¸º 4 ä¸ªæ•°ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†é˜¶æ®µé€‰æ‹©ï¼š
- å¦‚æœ <code>a[k] &gt; 0</code>ï¼Œåˆ™åœ¨å¯é€‰èŒƒå›´å†…é€‰æ‹©æœ€å¤§çš„ <code>b[i]</code>
- å¦‚æœ <code>a[k] &lt; 0</code>ï¼Œåˆ™åœ¨å¯é€‰èŒƒå›´å†…é€‰æ‹©æœ€å°çš„ <code>b[i]</code>
ä½†å¿…é¡»ä¿è¯ç´¢å¼•é€’å¢ï¼Œæ‰€ä»¥æ¯ä¸ªé˜¶æ®µçš„å¯é€‰èŒƒå›´æ˜¯ <code>b</code> çš„å‰©ä½™éƒ¨åˆ†ã€‚</p>

<p>è¿™ç§æ–¹æ³•éœ€è¦ç»´æŠ¤å‰ç¼€/åç¼€çš„æœ€å¤§æœ€å°å€¼ï¼Œå®ç°è¾ƒå¤æ‚ï¼Œä¸”ä¸ä¸€å®šä¿è¯å…¨å±€æœ€ä¼˜ï¼ˆå› ä¸ºé€‰æ‹©å½“å‰æœ€ä¼˜å¯èƒ½å½±å“åç»­é€‰æ‹©ï¼‰ã€‚</p>

<hr />

<h3 id="æ€è·¯ä¸‰å››é‡å¾ªç¯ä¼˜åŒ–åç¼€æœ€å¤§å€¼">æ€è·¯ä¸‰ï¼šå››é‡å¾ªç¯ä¼˜åŒ–ï¼ˆåç¼€æœ€å¤§å€¼ï¼‰</h3>

<p>å¯¹äºå›ºå®š <code>i3</code>ï¼Œæˆ‘ä»¬éœ€è¦å‰ä¸‰ä¸ªç´¢å¼•çš„æœ€ä¼˜é€‰æ‹©ã€‚<br />
å¯ä»¥é¢„å¤„ç†ï¼š
- å¯¹äºæ¯ä¸ªä½ç½® <code>i</code>ï¼Œè®¡ç®— <code>a[3]*b[i]</code> åŠ ä¸Šä¹‹å‰ä¸‰ä¸ªé˜¶æ®µçš„æœ€å¤§å€¼ã€‚
- ç”¨ç±»ä¼¼ DP ä½†åå‘æˆ–æ­£å‘é€’æ¨çš„æ–¹å¼ï¼Œé¿å… O(nâ´) æš´åŠ›ã€‚</p>

<p>å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <strong>åˆ†é˜¶æ®µåç¼€æœ€å¤§å€¼</strong> æ¥ä¼˜åŒ–ï¼š
1. ä»å³å¾€å·¦è®¡ç®— <code>max3[i] = max(a[3]*b[j])</code> å¯¹äº <code>j â‰¥ i</code>
2. ç„¶åè®¡ç®— <code>max2[i] = max(a[2]*b[i] + max3[i+1])</code> å¯¹äº <code>i</code>
3. ç±»ä¼¼å¾—åˆ° <code>max1</code> å’Œ <code>max0</code>ã€‚</p>

<p>è¿™æ ·æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œç©ºé—´ O(n) æˆ– O(1)ã€‚</p>

<hr />

<h2 id="è§£æ³•å®ç°">è§£æ³•å®ç°</h2>

<h3 id="è§£æ³•ä¸€åŠ¨æ€è§„åˆ’4-é˜¶æ®µ-dpç©ºé—´ä¼˜åŒ–">è§£æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ï¼ˆ4 é˜¶æ®µ DPï¼Œç©ºé—´ä¼˜åŒ–ï¼‰</h3>

<pre><code>func maxScore(a []int, b []int) int {
    n := len(b)
    // dpPrev å’Œ dpCurr åˆ†åˆ«è¡¨ç¤ºä¸Šä¸€é˜¶æ®µå’Œå½“å‰é˜¶æ®µ
    dpPrev := make([]int, n)
    dpCurr := make([]int, n)

    // åˆå§‹åŒ– k=0 é˜¶æ®µ
    dpCurr[0] = a[0] * b[0]
    for i := 1; i &lt; n; i++ {
        dpCurr[i] = max(dpCurr[i-1], a[0]*b[i])
    }

    // é˜¶æ®µ k=1,2,3
    for k := 1; k &lt; 4; k++ {
        dpPrev, dpCurr = dpCurr, dpPrev
        // i &lt; k æ—¶ä¸å¯èƒ½é€‰ k+1 ä¸ªå…ƒç´ ï¼Œè·³è¿‡
        dpCurr[k] = dpPrev[k-1] + a[k]*b[k]
        for i := k+1; i &lt; n; i++ {
            dpCurr[i] = max(dpCurr[i-1], dpPrev[i-1] + a[k]*b[i])
        }
    }
    return dpCurr[n-1]
}

func max(x, y int) int {
    if x &gt; y {
        return x
    }
    return y
}
</code></pre>

<pre><code>#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;climits&gt;
using namespace std;

class Solution {
public:
    int maxScore(vector&lt;int&gt;&amp; a, vector&lt;int&gt;&amp; b) {
        int n = b.size();
        vector&lt;long long&gt; dpPrev(n), dpCurr(n);
        // é˜¶æ®µ 0
        dpCurr[0] = (long long)a[0] * b[0];
        for (int i = 1; i &lt; n; i++) {
            dpCurr[i] = max(dpCurr[i-1], (long long)a[0] * b[i]);
        }
        // é˜¶æ®µ 1,2,3
        for (int k = 1; k &lt; 4; k++) {
            swap(dpPrev, dpCurr);
            dpCurr[k] = dpPrev[k-1] + (long long)a[k] * b[k];
            for (int i = k+1; i &lt; n; i++) {
                dpCurr[i] = max(dpCurr[i-1], dpPrev[i-1] + (long long)a[k] * b[i]);
            }
        }
        return dpCurr[n-1];
    }
};
</code></pre>

<p><strong>å¤æ‚åº¦åˆ†æ</strong>ï¼š
- æ—¶é—´å¤æ‚åº¦ï¼šO(4n) = O(n)
- ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼ˆä¸¤ä¸ªæ•°ç»„ï¼‰</p>

<hr />

<h3 id="è§£æ³•äºŒåˆ†é˜¶æ®µåç¼€æœ€å¤§å€¼åå‘-dp">è§£æ³•äºŒï¼šåˆ†é˜¶æ®µåç¼€æœ€å¤§å€¼ï¼ˆåå‘ DPï¼‰</h3>

<p>å®šä¹‰ï¼š
- <code>suffix3[i]</code> = ä» <code>i</code> å¼€å§‹å¾€åé€‰ä¸€ä¸ªæ•°ä½œä¸ºç¬¬ 4 ä¸ªæ•°çš„æœ€å¤§ <code>a[3]*b[j]</code>
- <code>suffix2[i]</code> = ä» <code>i</code> å¼€å§‹å¾€åé€‰ä¸¤ä¸ªæ•°ï¼ˆç¬¬3ã€4ä¸ªï¼‰çš„æœ€å¤§å’Œ
- <code>suffix1[i]</code> = ä» <code>i</code> å¼€å§‹å¾€åé€‰ä¸‰ä¸ªæ•°çš„æœ€å¤§å’Œ
- <code>suffix0[i]</code> = ä» <code>i</code> å¼€å§‹å¾€åé€‰å››ä¸ªæ•°çš„æœ€å¤§å’Œï¼ˆå³æœ€ç»ˆç­”æ¡ˆï¼‰</p>

<p>é€’æ¨ï¼š</p>

<pre><code>suffix3[i] = max(a[3]*b[i], suffix3[i+1])
suffix2[i] = max(a[2]*b[i] + suffix3[i+1], suffix2[i+1])
suffix1[i] = max(a[1]*b[i] + suffix2[i+1], suffix1[i+1])
suffix0[i] = max(a[0]*b[i] + suffix1[i+1], suffix0[i+1])
</code></pre>

<p>ä»å³å¾€å·¦è®¡ç®—ã€‚</p>

<pre><code>func maxScore(a []int, b []int) int {
    n := len(b)
    suffix3 := make([]int64, n)
    suffix2 := make([]int64, n)
    suffix1 := make([]int64, n)
    suffix0 := make([]int64, n)

    // åˆå§‹åŒ–æœ€åä¸€ä¸ªä½ç½®
    suffix3[n-1] = int64(a[3]) * int64(b[n-1])
    suffix2[n-1] = -1 &lt;&lt; 62 // ä¸å¯èƒ½é€‰ä¸¤ä¸ªæ•°ï¼Œè®¾ä¸ºæå°
    suffix1[n-1] = -1 &lt;&lt; 62
    suffix0[n-1] = -1 &lt;&lt; 62

    for i := n-2; i &gt;= 0; i-- {
        // ç¬¬ 4 ä¸ªæ•°
        suffix3[i] = max(int64(a[3])*int64(b[i]), suffix3[i+1])
        // ç¬¬ 3ã€4 ä¸ªæ•°
        if i &lt;= n-2 {
            suffix2[i] = max(int64(a[2])*int64(b[i])+suffix3[i+1], suffix2[i+1])
        } else {
            suffix2[i] = -1 &lt;&lt; 62
        }
        // ç¬¬ 2ã€3ã€4 ä¸ªæ•°
        if i &lt;= n-3 {
            suffix1[i] = max(int64(a[1])*int64(b[i])+suffix2[i+1], suffix1[i+1])
        } else {
            suffix1[i] = -1 &lt;&lt; 62
        }
        // ç¬¬ 1ã€2ã€3ã€4 ä¸ªæ•°
        if i &lt;= n-4 {
            suffix0[i] = max(int64(a[0])*int64(b[i])+suffix1[i+1], suffix0[i+1])
        } else {
            suffix0[i] = -1 &lt;&lt; 62
        }
    }
    return int(suffix0[0])
}

func max(x, y int64) int64 {
    if x &gt; y {
        return x
    }
    return y
}
</code></pre>

<pre><code>#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;climits&gt;
using namespace std;

class Solution {
public:
    int maxScore(vector&lt;int&gt;&amp; a, vector&lt;int&gt;&amp; b) {
        int n = b.size();
        vector&lt;long long&gt; suffix3(n), suffix2(n), suffix1(n), suffix0(n);
        const long long INF = LLONG_MIN / 2;

        suffix3[n-1] = (long long)a[3] * b[n-1];
        suffix2[n-1] = INF;
        suffix1[n-1] = INF;
        suffix0[n-1] = INF;

        for (int i = n-2; i &gt;= 0; i--) {
            suffix3[i] = max((long long)a[3] * b[i], suffix3[i+1]);

            if (i &lt;= n-2) {
                suffix2[i] = max((long long)a[2] * b[i] + suffix3[i+1], suffix2[i+1]);
            } else {
                suffix2[i] = INF;
            }

            if (i &lt;= n-3) {
                suffix1[i] = max((long long)a[1] * b[i] + suffix2[i+1], suffix1[i+1]);
            } else {
                suffix1[i] = INF;
            }

            if (i &lt;= n-4) {
                suffix0[i] = max((long long)a[0] * b[i] + suffix1[i+1], suffix0[i+1]);
            } else {
                suffix0[i] = INF;
            }
        }
        return suffix0[0];
    }
};
</code></pre>

<p><strong>å¤æ‚åº¦åˆ†æ</strong>ï¼š
- æ—¶é—´å¤æ‚åº¦ï¼šO(n)
- ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼ˆå¯ä¼˜åŒ–åˆ° O(1)ï¼Œåªä¿ç•™æœ€è¿‘å‡ ä¸ªå€¼ï¼‰</p>

<hr />

<h3 id="è§£æ³•ä¸‰å››å˜é‡æ»šåŠ¨-dpæœ€ä¼˜ç©ºé—´">è§£æ³•ä¸‰ï¼šå››å˜é‡æ»šåŠ¨ DPï¼ˆæœ€ä¼˜ç©ºé—´ï¼‰</h3>

<p>ç”±äºåªä¾èµ–å‰ä¸€é˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ 4 ä¸ªå˜é‡åˆ†åˆ«è¡¨ç¤ºä»¥å½“å‰ä½ç½®ç»“å°¾çš„ 1ã€2ã€3ã€4 ä¸ªæ•°çš„æœ€å¤§å¾—åˆ†ã€‚</p>

<pre><code>func maxScore(a []int, b []int) int {
    n := len(b)
    // dp1, dp2, dp3, dp4 åˆ†åˆ«è¡¨ç¤ºé€‰æ‹© 1,2,3,4 ä¸ªæ•°çš„æœ€å¤§å¾—åˆ†
    dp1, dp2, dp3, dp4 := int64(-1e18), int64(-1e18), int64(-1e18), int64(-1e18)

    for i := 0; i &lt; n; i++ {
        val := int64(b[i])
        // æ³¨æ„æ›´æ–°é¡ºåºï¼šä»å¤šåˆ°å°‘ï¼Œé¿å…é‡å¤ä½¿ç”¨å½“å‰å…ƒç´ 
        dp4 = max(dp4, dp3 + int64(a[3])*val)
        dp3 = max(dp3, dp2 + int64(a[2])*val)
        dp2 = max(dp2, dp1 + int64(a[1])*val)
        dp1 = max(dp1, int64(a[0])*val)
    }
    return int(dp4)
}

func max(x, y int64) int64 {
    if x &gt; y {
        return x
    }
    return y
}
</code></pre>

<pre><code>#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;climits&gt;
using namespace std;

class Solution {
public:
    int maxScore(vector&lt;int&gt;&amp; a, vector&lt;int&gt;&amp; b) {
        int n = b.size();
        long long dp1 = LLONG_MIN, dp2 = LLONG_MIN, dp3 = LLONG_MIN, dp4 = LLONG_MIN;
        for (int i = 0; i &lt; n; i++) {
            long long val = b[i];
            dp4 = max(dp4, dp3 + a[3] * val);
            dp3 = max(dp3, dp2 + a[2] * val);
            dp2 = max(dp2, dp1 + a[1] * val);
            dp1 = max(dp1, a[0] * val);
        }
        return dp4;
    }
};
</code></pre>

<p><strong>å¤æ‚åº¦åˆ†æ</strong>ï¼š
- æ—¶é—´å¤æ‚åº¦ï¼šO(n)
- ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p>

<hr />

<h2 id="è§£æ³•å¯¹æ¯”">è§£æ³•å¯¹æ¯”</h2>

<table>
<thead>
<tr>
  <th>è§£æ³•</th>
  <th>æ—¶é—´å¤æ‚åº¦</th>
  <th>ç©ºé—´å¤æ‚åº¦</th>
  <th>ä¼˜ç‚¹</th>
  <th>ç¼ºç‚¹</th>
</tr>
</thead>
<tbody>
<tr>
  <td>åŠ¨æ€è§„åˆ’ï¼ˆ4é˜¶æ®µï¼‰</td>
  <td>O(n)</td>
  <td>O(n)</td>
  <td>ç›´è§‚ï¼Œæ˜“äºç†è§£</td>
  <td>ç©ºé—´å¯ä¼˜åŒ–</td>
</tr>
<tr>
  <td>åç¼€æœ€å¤§å€¼</td>
  <td>O(n)</td>
  <td>O(n)</td>
  <td>åå‘æ€ç»´ï¼Œé¿å…ç´¢å¼•è¶Šç•Œåˆ¤æ–­</td>
  <td>å®ç°ç¨å¤æ‚</td>
</tr>
<tr>
  <td>å››å˜é‡æ»šåŠ¨ DP</td>
  <td>O(n)</td>
  <td>O(1)</td>
  <td>æœ€ä¼˜ç©ºé—´ï¼Œä»£ç ç®€æ´</td>
  <td>éœ€è¦ä»”ç»†å¤„ç†æ›´æ–°é¡ºåº</td>
</tr>
</tbody>
</table>

<p><strong>æ¨èè§£æ³•</strong>ï¼šè§£æ³•ä¸‰ï¼ˆå››å˜é‡æ»šåŠ¨ DPï¼‰ï¼Œå› ä¸ºå®ƒåœ¨æ—¶é—´å’Œç©ºé—´ä¸Šéƒ½æ˜¯æœ€ä¼˜çš„ï¼Œä¸”ä»£ç ç®€æ´ã€‚</p>

<hr />

<p><em>è·å–æ—¶é—´: 2026-02-26 17:48:47</em></p>

                </div>
            </div>

            <div class="footer">
                <p>ç”± <a href="https://github.com/LFrankl/leetcode" target="_blank">LeetCode Daily Script</a> è‡ªåŠ¨ç”Ÿæˆ</p>
                <p>AI è§£ç­”ç”± <a href="https://www.deepseek.com/" target="_blank">DeepSeek</a> æä¾›</p>
            </div>
        </div>
    </div>
</body>
</html>