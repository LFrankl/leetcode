<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeetCode 2026-02-26 19:55:57</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
        <div class="content">
            <h1>ğŸ“… 2026-02-26 19:55:57 æ¯æ—¥é¢˜ç›®</h1>
            <h1 id="1394-æ‰¾å‡ºæ•°ç»„ä¸­çš„å¹¸è¿æ•°">1394. æ‰¾å‡ºæ•°ç»„ä¸­çš„å¹¸è¿æ•°</h1>

<p><strong>éš¾åº¦</strong>: Easy</p>

<p><strong>æ ‡ç­¾</strong>: æ•°ç»„, å“ˆå¸Œè¡¨, è®¡æ•°</p>

<p><strong>é“¾æ¥</strong>: https://leetcode.cn/problems/find-lucky-integer-in-an-array/</p>

<hr />

<h2 id="é¢˜ç›®æè¿°">é¢˜ç›®æè¿°</h2>

<p>åœ¨æ•´æ•°æ•°ç»„ä¸­ï¼Œå¦‚æœä¸€ä¸ªæ•´æ•°çš„å‡ºç°é¢‘æ¬¡å’Œå®ƒçš„æ•°å€¼å¤§å°ç›¸ç­‰ï¼Œæˆ‘ä»¬å°±ç§°è¿™ä¸ªæ•´æ•°ä¸ºã€Œå¹¸è¿æ•°ã€ã€‚</p>

<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>arr</code>ï¼Œè¯·ä½ ä»ä¸­æ‰¾å‡ºå¹¶è¿”å›ä¸€ä¸ªå¹¸è¿æ•°ã€‚</p>

<ul>
    <li>å¦‚æœæ•°ç»„ä¸­å­˜åœ¨å¤šä¸ªå¹¸è¿æ•°ï¼Œåªéœ€è¿”å› <strong>æœ€å¤§</strong> çš„é‚£ä¸ªã€‚</li>
    <li>å¦‚æœæ•°ç»„ä¸­ä¸å«å¹¸è¿æ•°ï¼Œåˆ™è¿”å› <strong>-1 </strong>ã€‚</li>
</ul>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>arr = [2,2,3,4]
<strong>è¾“å‡ºï¼š</strong>2
<strong>è§£é‡Šï¼š</strong>æ•°ç»„ä¸­å”¯ä¸€çš„å¹¸è¿æ•°æ˜¯ 2 ï¼Œå› ä¸ºæ•°å€¼ 2 çš„å‡ºç°é¢‘æ¬¡ä¹Ÿæ˜¯ 2 ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>arr = [1,2,2,3,3,3]
<strong>è¾“å‡ºï¼š</strong>3
<strong>è§£é‡Šï¼š</strong>1ã€2 ä»¥åŠ 3 éƒ½æ˜¯å¹¸è¿æ•°ï¼Œåªéœ€è¦è¿”å›å…¶ä¸­æœ€å¤§çš„ 3 ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>arr = [2,2,2,3,3]
<strong>è¾“å‡ºï¼š</strong>-1
<strong>è§£é‡Šï¼š</strong>æ•°ç»„ä¸­ä¸å­˜åœ¨å¹¸è¿æ•°ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>arr = [5]
<strong>è¾“å‡ºï¼š</strong>-1
</pre>

<p><strong>ç¤ºä¾‹ 5ï¼š</strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>arr = [7,7,7,7,7,7,7]
<strong>è¾“å‡ºï¼š</strong>7
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
    <li><code>1 &lt;= arr.length &lt;= 500</code></li>
    <li><code>1 &lt;= arr[i] &lt;= 500</code></li>
</ul>

<hr />

<h2 id="ä»£ç æ¨¡æ¿">ä»£ç æ¨¡æ¿</h2>

<h3 id="c">C++</h3>

<pre><code>class Solution {
public:
    int findLucky(vector&lt;int&gt;&amp; arr) {

    }
};
</code></pre>

<h3 id="java">Java</h3>

<pre><code>class Solution {
    public int findLucky(int[] arr) {

    }
}
</code></pre>

<h3 id="python3">Python3</h3>

<pre><code>class Solution:
    def findLucky(self, arr: List[int]) -&gt; int:

</code></pre>

<h3 id="javascript">JavaScript</h3>

<pre><code>/**
 * @param {number[]} arr
 * @return {number}
 */
var findLucky = function(arr) {

};
</code></pre>

<h3 id="go">Go</h3>

<pre><code>func findLucky(arr []int) int {

}
</code></pre>

<hr />

<h2 id="æç¤º">æç¤º</h2>

<ol>
<li>Count the frequency of each integer in the array.</li>
<li>Get all lucky numbers and return the largest of them.</li>
</ol>

<hr />

<h2 id="ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹">ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹</h2>

<pre><code>[2,2,3,4]
</code></pre>

<hr />

<h2 id="ai-è§£ç­”-deepseek">AI è§£ç­” (DeepSeek)</h2>

<h2 id="é¢˜ç›®åˆ†æ">é¢˜ç›®åˆ†æ</h2>

<p>æˆ‘ä»¬éœ€è¦åœ¨æ•°ç»„ä¸­æ‰¾åˆ°æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„æ•°å­—ï¼š
1. æ•°å­—çš„å‡ºç°æ¬¡æ•°ç­‰äºæ•°å­—æœ¬èº«çš„å€¼
2. å¦‚æœæœ‰å¤šä¸ªè¿™æ ·çš„æ•°å­—ï¼Œè¿”å›æœ€å¤§çš„é‚£ä¸ª
3. å¦‚æœæ²¡æœ‰ï¼Œè¿”å› -1</p>

<p>æ•°ç»„é•¿åº¦ â‰¤ 500ï¼Œå…ƒç´ å€¼ â‰¤ 500ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šç§æ–¹æ³•è§£å†³ã€‚</p>

<h2 id="è§£æ³•ä¸€å“ˆå¸Œè¡¨è®¡æ•°-éå†æ£€æŸ¥">è§£æ³•ä¸€ï¼šå“ˆå¸Œè¡¨è®¡æ•° + éå†æ£€æŸ¥</h2>

<h3 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h3>

<ol>
<li>ä½¿ç”¨å“ˆå¸Œè¡¨ç»Ÿè®¡æ¯ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°</li>
<li>éå†å“ˆå¸Œè¡¨ï¼Œæ£€æŸ¥æ¯ä¸ªæ•°å­—æ˜¯å¦æ»¡è¶³ <code>æ•°å­— == å‡ºç°æ¬¡æ•°</code></li>
<li>è®°å½•æ»¡è¶³æ¡ä»¶çš„æœ€å¤§æ•°å­—</li>
</ol>

<h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3>

<h4 id="go-å®ç°">Go å®ç°</h4>

<pre><code>func findLucky(arr []int) int {
    // ç»Ÿè®¡æ¯ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°
    freq := make(map[int]int)
    for _, num := range arr {
        freq[num]++
    }

    // å¯»æ‰¾æœ€å¤§çš„å¹¸è¿æ•°
    maxLucky := -1
    for num, count := range freq {
        if num == count &amp;&amp; num &gt; maxLucky {
            maxLucky = num
        }
    }

    return maxLucky
}
</code></pre>

<h4 id="c-å®ç°">C++ å®ç°</h4>

<pre><code>#include &lt;vector&gt;
#include &lt;unordered_map&gt;
#include &lt;algorithm&gt;
using namespace std;

class Solution {
public:
    int findLucky(vector&lt;int&gt;&amp; arr) {
        // ç»Ÿè®¡æ¯ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°
        unordered_map&lt;int, int&gt; freq;
        for (int num : arr) {
            freq[num]++;
        }

        // å¯»æ‰¾æœ€å¤§çš„å¹¸è¿æ•°
        int maxLucky = -1;
        for (auto&amp; [num, count] : freq) {
            if (num == count &amp;&amp; num &gt; maxLucky) {
                maxLucky = num;
            }
        }

        return maxLucky;
    }
};
</code></pre>

<h3 id="å¤æ‚åº¦åˆ†æ">å¤æ‚åº¦åˆ†æ</h3>

<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„é•¿åº¦ã€‚éœ€è¦éå†æ•°ç»„ç»Ÿè®¡é¢‘ç‡ï¼Œç„¶åéå†å“ˆå¸Œè¡¨æ£€æŸ¥æ¡ä»¶ã€‚</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(k)ï¼Œå…¶ä¸­ k æ˜¯æ•°ç»„ä¸­ä¸åŒæ•°å­—çš„ä¸ªæ•°ï¼Œæœ€åæƒ…å†µä¸º O(n)ã€‚</li>
</ul>

<h2 id="è§£æ³•äºŒæ•°ç»„è®¡æ•°åˆ©ç”¨æ•°å€¼èŒƒå›´é™åˆ¶">è§£æ³•äºŒï¼šæ•°ç»„è®¡æ•°ï¼ˆåˆ©ç”¨æ•°å€¼èŒƒå›´é™åˆ¶ï¼‰</h2>

<h3 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h3>

<p>ç”±äºé¢˜ç›®æç¤º <code>1 &lt;= arr[i] &lt;= 500</code>ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å›ºå®šå¤§å°çš„æ•°ç»„æ¥è®¡æ•°ï¼Œé¿å…å“ˆå¸Œè¡¨çš„å¼€é”€ã€‚</p>

<h3 id="ä»£ç å®ç°-2">ä»£ç å®ç°</h3>

<h4 id="go-å®ç°-2">Go å®ç°</h4>

<pre><code>func findLucky(arr []int) int {
    // å› ä¸º arr[i] &lt;= 500ï¼Œæ‰€ä»¥åˆ›å»ºå¤§å°ä¸º 501 çš„æ•°ç»„
    freq := make([]int, 501)

    // ç»Ÿè®¡æ¯ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°
    for _, num := range arr {
        freq[num]++
    }

    // ä»å¤§åˆ°å°éå†ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå¹¸è¿æ•°å°±æ˜¯æœ€å¤§çš„
    for i := 500; i &gt;= 1; i-- {
        if freq[i] == i {
            return i
        }
    }

    return -1
}
</code></pre>

<h4 id="c-å®ç°-2">C++ å®ç°</h4>

<pre><code>#include &lt;vector&gt;
using namespace std;

class Solution {
public:
    int findLucky(vector&lt;int&gt;&amp; arr) {
        // å› ä¸º arr[i] &lt;= 500ï¼Œæ‰€ä»¥åˆ›å»ºå¤§å°ä¸º 501 çš„æ•°ç»„
        vector&lt;int&gt; freq(501, 0);

        // ç»Ÿè®¡æ¯ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°
        for (int num : arr) {
            freq[num]++;
        }

        // ä»å¤§åˆ°å°éå†ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå¹¸è¿æ•°å°±æ˜¯æœ€å¤§çš„
        for (int i = 500; i &gt;= 1; i--) {
            if (freq[i] == i) {
                return i;
            }
        }

        return -1;
    }
};
</code></pre>

<h3 id="å¤æ‚åº¦åˆ†æ-2">å¤æ‚åº¦åˆ†æ</h3>

<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n + 500) = O(n)ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„é•¿åº¦ã€‚éå†æ•°ç»„ç»Ÿè®¡é¢‘ç‡ O(n)ï¼Œéå†è®¡æ•°æ•°ç»„ O(500)ã€‚</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(500) = O(1)ï¼Œä½¿ç”¨å›ºå®šå¤§å°çš„æ•°ç»„ã€‚</li>
</ul>

<h2 id="è§£æ³•ä¸‰æ’åº-è®¡æ•°">è§£æ³•ä¸‰ï¼šæ’åº + è®¡æ•°</h2>

<h3 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h3>

<ol>
<li>å…ˆå¯¹æ•°ç»„æ’åº</li>
<li>éå†æ’åºåçš„æ•°ç»„ï¼Œç»Ÿè®¡è¿ç»­ç›¸åŒæ•°å­—çš„ä¸ªæ•°</li>
<li>æ£€æŸ¥æ˜¯å¦æ»¡è¶³å¹¸è¿æ•°æ¡ä»¶</li>
</ol>

<h3 id="ä»£ç å®ç°-3">ä»£ç å®ç°</h3>

<h4 id="go-å®ç°-3">Go å®ç°</h4>

<pre><code>func findLucky(arr []int) int {
    // æ’åº
    sort.Ints(arr)

    maxLucky := -1
    count := 1

    // éå†æ•°ç»„
    for i := 1; i &lt;= len(arr); i++ {
        if i &lt; len(arr) &amp;&amp; arr[i] == arr[i-1] {
            count++
        } else {
            // æ£€æŸ¥å‰ä¸€ä¸ªæ•°å­—æ˜¯å¦æ˜¯å¹¸è¿æ•°
            if arr[i-1] == count &amp;&amp; count &gt; maxLucky {
                maxLucky = count
            }
            count = 1
        }
    }

    return maxLucky
}
</code></pre>

<h4 id="c-å®ç°-3">C++ å®ç°</h4>

<pre><code>#include &lt;vector&gt;
#include &lt;algorithm&gt;
using namespace std;

class Solution {
public:
    int findLucky(vector&lt;int&gt;&amp; arr) {
        // æ’åº
        sort(arr.begin(), arr.end());

        int maxLucky = -1;
        int count = 1;

        // éå†æ•°ç»„
        for (int i = 1; i &lt;= arr.size(); i++) {
            if (i &lt; arr.size() &amp;&amp; arr[i] == arr[i-1]) {
                count++;
            } else {
                // æ£€æŸ¥å‰ä¸€ä¸ªæ•°å­—æ˜¯å¦æ˜¯å¹¸è¿æ•°
                if (arr[i-1] == count &amp;&amp; count &gt; maxLucky) {
                    maxLucky = count;
                }
                count = 1;
            }
        }

        return maxLucky;
    }
};
</code></pre>

<h3 id="å¤æ‚åº¦åˆ†æ-3">å¤æ‚åº¦åˆ†æ</h3>

<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n log n)ï¼Œä¸»è¦æ˜¯æ’åºçš„æ—¶é—´å¤æ‚åº¦ã€‚</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(1) æˆ– O(log n)ï¼Œå–å†³äºæ’åºç®—æ³•çš„ç©ºé—´å¤æ‚åº¦ã€‚</li>
</ul>

<h2 id="è§£æ³•å¯¹æ¯”">è§£æ³•å¯¹æ¯”</h2>

<table>
<thead>
<tr>
  <th>è§£æ³•</th>
  <th>ä¼˜ç‚¹</th>
  <th>ç¼ºç‚¹</th>
  <th>é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody>
<tr>
  <td>å“ˆå¸Œè¡¨</td>
  <td>é€šç”¨æ€§å¼ºï¼Œä¸ä¾èµ–æ•°å€¼èŒƒå›´</td>
  <td>æœ‰å“ˆå¸Œè¡¨å¼€é”€</td>
  <td>é€šç”¨æƒ…å†µï¼Œæ•°å€¼èŒƒå›´æœªçŸ¥</td>
</tr>
<tr>
  <td>æ•°ç»„è®¡æ•°</td>
  <td>æ•ˆç‡é«˜ï¼Œç©ºé—´å›ºå®š</td>
  <td>ä¾èµ–æ•°å€¼èŒƒå›´é™åˆ¶</td>
  <td>æ•°å€¼èŒƒå›´å·²çŸ¥ä¸”ä¸å¤§</td>
</tr>
<tr>
  <td>æ’åº+è®¡æ•°</td>
  <td>ä¸éœ€è¦é¢å¤–ç©ºé—´ï¼ˆåŸåœ°æ’åºï¼‰</td>
  <td>æ—¶é—´å¤æ‚åº¦è¾ƒé«˜</td>
  <td>å¯¹ç©ºé—´è¦æ±‚ä¸¥æ ¼ï¼Œæ—¶é—´è¦æ±‚ä¸é«˜</td>
</tr>
</tbody>
</table>

<h2 id="æ¨èè§£æ³•">æ¨èè§£æ³•</h2>

<p>å¯¹äºæœ¬é¢˜ï¼Œ<strong>è§£æ³•äºŒï¼ˆæ•°ç»„è®¡æ•°ï¼‰æ˜¯æœ€ä¼˜çš„</strong>ï¼Œå› ä¸ºï¼š
1. é¢˜ç›®æ˜ç¡®ç»™å‡ºäº†æ•°å€¼èŒƒå›´é™åˆ¶ï¼ˆ1 â‰¤ arr[i] â‰¤ 500ï¼‰
2. æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œç©ºé—´å¤æ‚åº¦ O(1)ï¼ˆå›ºå®šå¤§å°æ•°ç»„ï¼‰
3. å®ç°ç®€å•ï¼Œæ•ˆç‡é«˜</p>

<p>åœ¨å®é™…é¢è¯•ä¸­ï¼Œå¯ä»¥å…ˆæå‡ºå“ˆå¸Œè¡¨è§£æ³•ï¼Œç„¶åæ ¹æ®æ•°å€¼èŒƒå›´ä¼˜åŒ–ä¸ºæ•°ç»„è®¡æ•°è§£æ³•ï¼Œå±•ç¤ºå¯¹é—®é¢˜çš„æ·±å…¥æ€è€ƒã€‚</p>

<hr />

<p><em>è·å–æ—¶é—´: 2026-02-26 19:53:18</em></p>

<hr />

<h1 id="1775-é€šè¿‡æœ€å°‘æ“ä½œæ¬¡æ•°ä½¿æ•°ç»„çš„å’Œç›¸ç­‰">1775. é€šè¿‡æœ€å°‘æ“ä½œæ¬¡æ•°ä½¿æ•°ç»„çš„å’Œç›¸ç­‰</h1>

<p><strong>éš¾åº¦</strong>: Medium</p>

<p><strong>æ ‡ç­¾</strong>: è´ªå¿ƒ, æ•°ç»„, å“ˆå¸Œè¡¨, è®¡æ•°</p>

<p><strong>é“¾æ¥</strong>: https://leetcode.cn/problems/equal-sum-arrays-with-minimum-number-of-operations/</p>

<hr />

<h2 id="é¢˜ç›®æè¿°-2">é¢˜ç›®æè¿°</h2>

<p>ç»™ä½ ä¸¤ä¸ªé•¿åº¦å¯èƒ½ä¸ç­‰çš„æ•´æ•°æ•°ç»„Â <code>nums1</code> å’ŒÂ <code>nums2</code>Â ã€‚ä¸¤ä¸ªæ•°ç»„ä¸­çš„æ‰€æœ‰å€¼éƒ½åœ¨Â <code>1</code>Â åˆ°Â <code>6</code>Â ä¹‹é—´ï¼ˆåŒ…å«Â <code>1</code>Â å’ŒÂ <code>6</code>ï¼‰ã€‚</p>

<p>æ¯æ¬¡æ“ä½œä¸­ï¼Œä½ å¯ä»¥é€‰æ‹© <strong>ä»»æ„</strong>Â æ•°ç»„ä¸­çš„ä»»æ„ä¸€ä¸ªæ•´æ•°ï¼Œå°†å®ƒå˜æˆ <code>1</code>Â åˆ° <code>6</code>Â ä¹‹é—´ <strong>ä»»æ„</strong>Â çš„å€¼ï¼ˆåŒ…å« <code>1</code>Â å’Œ <code><span style="">6</span></code>ï¼‰ã€‚</p>

<p>è¯·ä½ è¿”å›ä½¿ <code>nums1</code>Â ä¸­æ‰€æœ‰æ•°çš„å’Œä¸Â <code>nums2</code>Â ä¸­æ‰€æœ‰æ•°çš„å’Œç›¸ç­‰çš„æœ€å°‘æ“ä½œæ¬¡æ•°ã€‚å¦‚æœæ— æ³•ä½¿ä¸¤ä¸ªæ•°ç»„çš„å’Œç›¸ç­‰ï¼Œè¯·è¿”å› <code>-1</code>Â ã€‚</p>

<p>Â </p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre><b>è¾“å…¥ï¼š</b>nums1 = [1,2,3,4,5,6], nums2 = [1,1,2,2,2,2]
<b>è¾“å‡ºï¼š</b>3
<b>è§£é‡Šï¼š</b>ä½ å¯ä»¥é€šè¿‡ 3 æ¬¡æ“ä½œä½¿ nums1 ä¸­æ‰€æœ‰æ•°çš„å’Œä¸ nums2 ä¸­æ‰€æœ‰æ•°çš„å’Œç›¸ç­‰ã€‚ä»¥ä¸‹æ•°ç»„ä¸‹æ ‡éƒ½ä» 0 å¼€å§‹ã€‚
- å°† nums2[0] å˜ä¸º 6 ã€‚ nums1 = [1,2,3,4,5,6], nums2 = [<strong>6</strong>,1,2,2,2,2] ã€‚
- å°† nums1[5] å˜ä¸º 1 ã€‚ nums1 = [1,2,3,4,5,<strong>1</strong>], nums2 = [6,1,2,2,2,2] ã€‚
- å°† nums1[2] å˜ä¸º 2 ã€‚ nums1 = [1,2,<strong>2</strong>,4,5,1], nums2 = [6,1,2,2,2,2] ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre><b>è¾“å…¥ï¼š</b>nums1 = [1,1,1,1,1,1,1], nums2 = [6]
<b>è¾“å‡ºï¼š</b>-1
<b>è§£é‡Šï¼š</b>æ²¡æœ‰åŠæ³•å‡å°‘ nums1 çš„å’Œæˆ–è€…å¢åŠ  nums2 çš„å’Œä½¿äºŒè€…ç›¸ç­‰ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre><b>è¾“å…¥ï¼š</b>nums1 = [6,6], nums2 = [1]
<b>è¾“å‡ºï¼š</b>3
<b>è§£é‡Šï¼š</b>ä½ å¯ä»¥é€šè¿‡ 3 æ¬¡æ“ä½œä½¿ nums1 ä¸­æ‰€æœ‰æ•°çš„å’Œä¸ nums2 ä¸­æ‰€æœ‰æ•°çš„å’Œç›¸ç­‰ã€‚ä»¥ä¸‹æ•°ç»„ä¸‹æ ‡éƒ½ä» 0 å¼€å§‹ã€‚
- å°† nums1[0] å˜ä¸º 2 ã€‚ nums1 = [<strong>2</strong>,6], nums2 = [1] ã€‚
- å°† nums1[1] å˜ä¸º 2 ã€‚ nums1 = [2,<strong>2</strong>], nums2 = [1] ã€‚
- å°† nums2[0] å˜ä¸º 4 ã€‚ nums1 = [2,2], nums2 = [<strong>4</strong>] ã€‚
</pre>

<p>Â </p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
    <li><code>1 &lt;= nums1.length, nums2.length &lt;= 10<sup>5</sup></code></li>
    <li><code>1 &lt;= nums1[i], nums2[i] &lt;= 6</code></li>
</ul>

<hr />

<h2 id="ä»£ç æ¨¡æ¿-2">ä»£ç æ¨¡æ¿</h2>

<h3 id="c-2">C++</h3>

<pre><code>class Solution {
public:
    int minOperations(vector&lt;int&gt;&amp; nums1, vector&lt;int&gt;&amp; nums2) {

    }
};
</code></pre>

<h3 id="java-2">Java</h3>

<pre><code>class Solution {
    public int minOperations(int[] nums1, int[] nums2) {

    }
}
</code></pre>

<h3 id="python3-2">Python3</h3>

<pre><code>class Solution:
    def minOperations(self, nums1: List[int], nums2: List[int]) -&gt; int:

</code></pre>

<h3 id="javascript-2">JavaScript</h3>

<pre><code>/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @return {number}
 */
var minOperations = function(nums1, nums2) {

};
</code></pre>

<h3 id="go-2">Go</h3>

<pre><code>func minOperations(nums1 []int, nums2 []int) int {

}
</code></pre>

<hr />

<h2 id="æç¤º-2">æç¤º</h2>

<ol>
<li>Let's note that we want to either decrease the sum of the array with a larger sum or increase the array's sum with the smaller sum.</li>
<li>You can maintain the largest increase or decrease you can make in a binary search tree and each time get the maximum one.</li>
</ol>

<hr />

<h2 id="ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹-2">ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹</h2>

<pre><code>[1,2,3,4,5,6]
[1,1,2,2,2,2]
</code></pre>

<hr />

<h2 id="ai-è§£ç­”-deepseek-2">AI è§£ç­” (DeepSeek)</h2>

<h2 id="é¢˜ç›®åˆ†æ-2">é¢˜ç›®åˆ†æ</h2>

<p><strong>é—®é¢˜æœ¬è´¨</strong>ï¼šæœ‰ä¸¤ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ å€¼åœ¨ 1~6 ä¹‹é—´ã€‚æ¯æ¬¡æ“ä½œå¯ä»¥å°†ä»»æ„ä¸€ä¸ªå…ƒç´ å˜æˆ 1~6 ä¹‹é—´çš„ä»»æ„å€¼ã€‚ç›®æ ‡æ˜¯è®©ä¸¤ä¸ªæ•°ç»„çš„å’Œç›¸ç­‰ï¼Œæ±‚æœ€å°‘æ“ä½œæ¬¡æ•°ã€‚</p>

<p><strong>å…³é”®ç‚¹</strong>ï¼š
1. æ¯ä¸ªå…ƒç´ çš„å˜åŒ–èŒƒå›´æ˜¯æœ‰é™çš„ï¼ˆ1~6ï¼‰
2. æ“ä½œå¯ä»¥å¢åŠ æˆ–å‡å°‘å…ƒç´ å€¼ï¼Œä»è€Œæ”¹å˜æ•°ç»„å’Œ
3. æˆ‘ä»¬éœ€è¦æœ€å°åŒ–æ“ä½œæ¬¡æ•°</p>

<h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2>

<h3 id="æ ¸å¿ƒæ€è·¯">æ ¸å¿ƒæ€è·¯</h3>

<p>è®¾ï¼š
- <code>sum1</code> = nums1 çš„å’Œ
- <code>sum2</code> = nums2 çš„å’Œ
- <code>diff</code> = sum1 - sum2</p>

<p>å¦‚æœ <code>diff == 0</code>ï¼Œå·²ç»ç›¸ç­‰ï¼Œè¿”å› 0ã€‚</p>

<p>å¦‚æœ <code>diff &gt; 0</code>ï¼Œè¯´æ˜ sum1 å¤ªå¤§ï¼Œéœ€è¦å‡å°‘ sum1 æˆ–å¢åŠ  sum2ã€‚
å¦‚æœ <code>diff &lt; 0</code>ï¼Œè¯´æ˜ sum2 å¤ªå¤§ï¼Œéœ€è¦å‡å°‘ sum2 æˆ–å¢åŠ  sum1ã€‚</p>

<p><strong>è´ªå¿ƒç­–ç•¥</strong>ï¼š
- å¯¹äºéœ€è¦å‡å°‘çš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šèƒ½å‡å°‘ <code>å½“å‰å€¼ - 1</code>
- å¯¹äºéœ€è¦å¢åŠ çš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šèƒ½å¢åŠ  <code>6 - å½“å‰å€¼</code>
- æ¯æ¬¡é€‰æ‹©èƒ½å¸¦æ¥æœ€å¤§å˜åŒ–é‡çš„å…ƒç´ è¿›è¡Œæ“ä½œ</p>

<h3 id="å…·ä½“æ­¥éª¤">å…·ä½“æ­¥éª¤</h3>

<ol>
<li>è®¡ç®—ä¸¤ä¸ªæ•°ç»„çš„å’Œï¼Œå¾—åˆ°å·®å€¼ <code>diff</code></li>
<li>å¦‚æœ <code>diff == 0</code>ï¼Œè¿”å› 0</li>
<li>ç¡®å®šå“ªä¸ªæ•°ç»„éœ€è¦å‡å°‘ï¼Œå“ªä¸ªéœ€è¦å¢åŠ </li>
<li>æ”¶é›†æ‰€æœ‰å¯èƒ½çš„"å˜åŒ–é‡"ï¼š
<ul>
<li>å¯¹äºéœ€è¦å‡å°‘çš„æ•°ç»„ï¼šæ¯ä¸ªå…ƒç´ èƒ½å‡å°‘ <code>nums[i] - 1</code></li>
<li>å¯¹äºéœ€è¦å¢åŠ çš„æ•°ç»„ï¼šæ¯ä¸ªå…ƒç´ èƒ½å¢åŠ  <code>6 - nums[i]</code></li>
</ul></li>
<li>å°†è¿™äº›å˜åŒ–é‡ä»å¤§åˆ°å°æ’åº</li>
<li>è´ªå¿ƒåœ°ä½¿ç”¨æœ€å¤§çš„å˜åŒ–é‡ï¼Œç›´åˆ° <code>diff</code> å˜ä¸º 0 æˆ–æ²¡æœ‰æ›´å¤šå˜åŒ–é‡å¯ç”¨</li>
<li>å¦‚æœ <code>diff</code> å˜ä¸º 0ï¼Œè¿”å›æ“ä½œæ¬¡æ•°ï¼›å¦åˆ™è¿”å› -1</li>
</ol>

<hr />

<h2 id="è§£æ³•ä¸€è´ªå¿ƒ-æ’åº">è§£æ³•ä¸€ï¼šè´ªå¿ƒ + æ’åº</h2>

<h3 id="æ€è·¯">æ€è·¯</h3>

<ol>
<li>è®¡ç®—ä¸¤ä¸ªæ•°ç»„çš„å’ŒåŠå·®å€¼</li>
<li>æ”¶é›†æ‰€æœ‰å¯èƒ½çš„å˜åŒ–é‡</li>
<li>å¯¹å˜åŒ–é‡æ’åºï¼ˆä»å¤§åˆ°å°ï¼‰</li>
<li>è´ªå¿ƒåœ°ä½¿ç”¨æœ€å¤§çš„å˜åŒ–é‡</li>
</ol>

<h3 id="ä»£ç å®ç°-4">ä»£ç å®ç°</h3>

<h4 id="go-å®ç°-4">Go å®ç°</h4>

<pre><code>func minOperations(nums1 []int, nums2 []int) int {
    sum1, sum2 := 0, 0
    for _, num := range nums1 {
        sum1 += num
    }
    for _, num := range nums2 {
        sum2 += num
    }

    // ç¡®ä¿ sum1 &gt;= sum2ï¼Œæ–¹ä¾¿å¤„ç†
    if sum1 &lt; sum2 {
        nums1, nums2 = nums2, nums1
        sum1, sum2 = sum2, sum1
    }

    diff := sum1 - sum2
    if diff == 0 {
        return 0
    }

    // æ”¶é›†å˜åŒ–é‡
    changes := make([]int, 0)

    // nums1 ä¸­çš„å…ƒç´ å¯ä»¥å‡å°‘ï¼ˆå› ä¸º sum1 æ›´å¤§ï¼‰
    for _, num := range nums1 {
        changes = append(changes, num-1)  // æœ€å¤šå‡å°‘åˆ° 1
    }

    // nums2 ä¸­çš„å…ƒç´ å¯ä»¥å¢åŠ 
    for _, num := range nums2 {
        changes = append(changes, 6-num)  // æœ€å¤šå¢åŠ åˆ° 6
    }

    // ä»å¤§åˆ°å°æ’åº
    sort.Sort(sort.Reverse(sort.IntSlice(changes)))

    // è´ªå¿ƒé€‰æ‹©
    operations := 0
    for i := 0; i &lt; len(changes) &amp;&amp; diff &gt; 0; i++ {
        diff -= changes[i]
        operations++
    }

    if diff &gt; 0 {
        return -1
    }
    return operations
}
</code></pre>

<h4 id="c-å®ç°-4">C++ å®ç°</h4>

<pre><code>class Solution {
public:
    int minOperations(vector&lt;int&gt;&amp; nums1, vector&lt;int&gt;&amp; nums2) {
        int sum1 = accumulate(nums1.begin(), nums1.end(), 0);
        int sum2 = accumulate(nums2.begin(), nums2.end(), 0);

        // ç¡®ä¿ sum1 &gt;= sum2
        if (sum1 &lt; sum2) {
            swap(nums1, nums2);
            swap(sum1, sum2);
        }

        int diff = sum1 - sum2;
        if (diff == 0) return 0;

        vector&lt;int&gt; changes;

        // nums1 ä¸­çš„å…ƒç´ å¯ä»¥å‡å°‘
        for (int num : nums1) {
            changes.push_back(num - 1);
        }

        // nums2 ä¸­çš„å…ƒç´ å¯ä»¥å¢åŠ 
        for (int num : nums2) {
            changes.push_back(6 - num);
        }

        // ä»å¤§åˆ°å°æ’åº
        sort(changes.rbegin(), changes.rend());

        int operations = 0;
        for (int change : changes) {
            if (diff &lt;= 0) break;
            diff -= change;
            operations++;
        }

        return diff &gt; 0 ? -1 : operations;
    }
};
</code></pre>

<h3 id="å¤æ‚åº¦åˆ†æ-4">å¤æ‚åº¦åˆ†æ</h3>

<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO((m+n)log(m+n))ï¼Œå…¶ä¸­ m å’Œ n åˆ†åˆ«æ˜¯ä¸¤ä¸ªæ•°ç»„çš„é•¿åº¦ï¼Œä¸»è¦æ˜¯æ’åºçš„å¤æ‚åº¦</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(m+n)ï¼Œç”¨äºå­˜å‚¨å˜åŒ–é‡æ•°ç»„</li>
</ul>

<hr />

<h2 id="è§£æ³•äºŒè´ªå¿ƒ-è®¡æ•°æ’åºä¼˜åŒ–">è§£æ³•äºŒï¼šè´ªå¿ƒ + è®¡æ•°æ’åºï¼ˆä¼˜åŒ–ï¼‰</h2>

<h3 id="æ€è·¯-2">æ€è·¯</h3>

<p>ç”±äºå…ƒç´ å€¼èŒƒå›´åªæœ‰ 1~6ï¼Œå˜åŒ–é‡çš„èŒƒå›´ä¹Ÿæ˜¯æœ‰é™çš„ï¼ˆ0~5ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨è®¡æ•°æ’åºæ¥ä¼˜åŒ–ã€‚</p>

<p>å˜åŒ–é‡åˆ†ç±»ï¼š
- å¯¹äºéœ€è¦å‡å°‘çš„æ•°ç»„ï¼šå˜åŒ–é‡ = å½“å‰å€¼ - 1ï¼ˆèŒƒå›´ 0~5ï¼‰
- å¯¹äºéœ€è¦å¢åŠ çš„æ•°ç»„ï¼šå˜åŒ–é‡ = 6 - å½“å‰å€¼ï¼ˆèŒƒå›´ 0~5ï¼‰</p>

<p>æˆ‘ä»¬å¯ä»¥ç»Ÿè®¡æ¯ä¸ªå˜åŒ–é‡å‡ºç°çš„æ¬¡æ•°ï¼Œç„¶åä»å¤§åˆ°å°ä½¿ç”¨ã€‚</p>

<h3 id="ä»£ç å®ç°-5">ä»£ç å®ç°</h3>

<h4 id="go-å®ç°-5">Go å®ç°</h4>

<pre><code>func minOperations(nums1 []int, nums2 []int) int {
    sum1, sum2 := 0, 0
    for _, num := range nums1 {
        sum1 += num
    }
    for _, num := range nums2 {
        sum2 += num
    }

    // ç¡®ä¿ sum1 &gt;= sum2
    if sum1 &lt; sum2 {
        nums1, nums2 = nums2, nums1
        sum1, sum2 = sum2, sum1
    }

    diff := sum1 - sum2
    if diff == 0 {
        return 0
    }

    // ç»Ÿè®¡å˜åŒ–é‡ï¼ˆå˜åŒ–é‡èŒƒå›´ 0~5ï¼‰
    cnt := make([]int, 6)  // cnt[i] è¡¨ç¤ºå˜åŒ–é‡ä¸º i çš„å…ƒç´ ä¸ªæ•°

    // nums1 ä¸­çš„å…ƒç´ å¯ä»¥å‡å°‘ï¼ˆå˜åŒ–é‡ = num-1ï¼‰
    for _, num := range nums1 {
        cnt[num-1]++
    }

    // nums2 ä¸­çš„å…ƒç´ å¯ä»¥å¢åŠ ï¼ˆå˜åŒ–é‡ = 6-numï¼‰
    for _, num := range nums2 {
        cnt[6-num]++
    }

    operations := 0
    // ä»æœ€å¤§çš„å˜åŒ–é‡ï¼ˆ5ï¼‰å¼€å§‹ä½¿ç”¨
    for i := 5; i &gt;= 1 &amp;&amp; diff &gt; 0; i-- {
        // æ¯ä¸ªå˜åŒ–é‡ä¸º i çš„å…ƒç´ æœ€å¤šå¯ä»¥å‡å°‘ diff çš„ i
        for cnt[i] &gt; 0 &amp;&amp; diff &gt; 0 {
            diff -= i
            cnt[i]--
            operations++
        }
    }

    if diff &gt; 0 {
        return -1
    }
    return operations
}
</code></pre>

<h4 id="c-å®ç°-5">C++ å®ç°</h4>

<pre><code>class Solution {
public:
    int minOperations(vector&lt;int&gt;&amp; nums1, vector&lt;int&gt;&amp; nums2) {
        int sum1 = accumulate(nums1.begin(), nums1.end(), 0);
        int sum2 = accumulate(nums2.begin(), nums2.end(), 0);

        // ç¡®ä¿ sum1 &gt;= sum2
        if (sum1 &lt; sum2) {
            swap(nums1, nums2);
            swap(sum1, sum2);
        }

        int diff = sum1 - sum2;
        if (diff == 0) return 0;

        // ç»Ÿè®¡å˜åŒ–é‡ï¼ˆ0~5ï¼‰
        vector&lt;int&gt; cnt(6, 0);

        // nums1 ä¸­çš„å…ƒç´ å¯ä»¥å‡å°‘
        for (int num : nums1) {
            cnt[num - 1]++;
        }

        // nums2 ä¸­çš„å…ƒç´ å¯ä»¥å¢åŠ 
        for (int num : nums2) {
            cnt[6 - num]++;
        }

        int operations = 0;
        // ä»æœ€å¤§çš„å˜åŒ–é‡å¼€å§‹ä½¿ç”¨
        for (int i = 5; i &gt;= 1 &amp;&amp; diff &gt; 0; i--) {
            while (cnt[i] &gt; 0 &amp;&amp; diff &gt; 0) {
                diff -= i;
                cnt[i]--;
                operations++;
            }
        }

        return diff &gt; 0 ? -1 : operations;
    }
};
</code></pre>

<h3 id="å¤æ‚åº¦åˆ†æ-5">å¤æ‚åº¦åˆ†æ</h3>

<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(m+n+6) = O(m+n)ï¼Œå…¶ä¸­ m å’Œ n åˆ†åˆ«æ˜¯ä¸¤ä¸ªæ•°ç»„çš„é•¿åº¦</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(6) = O(1)ï¼Œåªéœ€è¦å¸¸æ•°ç©ºé—´å­˜å‚¨è®¡æ•°æ•°ç»„</li>
</ul>

<hr />

<h2 id="è§£æ³•ä¸‰åŒæŒ‡é’ˆè¿›ä¸€æ­¥ä¼˜åŒ–">è§£æ³•ä¸‰ï¼šåŒæŒ‡é’ˆï¼ˆè¿›ä¸€æ­¥ä¼˜åŒ–ï¼‰</h2>

<h3 id="æ€è·¯-3">æ€è·¯</h3>

<p>å®é™…ä¸Šï¼Œæˆ‘ä»¬ä¸éœ€è¦æ˜¾å¼åœ°ç»Ÿè®¡æ‰€æœ‰å˜åŒ–é‡ã€‚æˆ‘ä»¬å¯ä»¥ï¼š
1. å¯¹ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«æ’åº
2. ä½¿ç”¨åŒæŒ‡é’ˆï¼š
   - æŒ‡é’ˆ i ä» nums1 æœ«å°¾å¼€å§‹ï¼ˆnums1 éœ€è¦å‡å°‘ï¼‰
   - æŒ‡é’ˆ j ä» nums2 å¼€å¤´å¼€å§‹ï¼ˆnums2 éœ€è¦å¢åŠ ï¼‰
3. æ¯æ¬¡é€‰æ‹©å˜åŒ–é‡æ›´å¤§çš„é‚£ä¸ªè¿›è¡Œæ“ä½œ</p>

<h3 id="ä»£ç å®ç°-6">ä»£ç å®ç°</h3>

<h4 id="go-å®ç°-6">Go å®ç°</h4>

<pre><code>func minOperations(nums1 []int, nums2 []int) int {
    sum1, sum2 := 0, 0
    for _, num := range nums1 {
        sum1 += num
    }
    for _, num := range nums2 {
        sum2 += num
    }

    // ç¡®ä¿ sum1 &gt;= sum2
    if sum1 &lt; sum2 {
        nums1, nums2 = nums2, nums1
        sum1, sum2 = sum2, sum1
    }

    diff := sum1 - sum2
    if diff == 0 {
        return 0
    }

    // æ’åº
    sort.Ints(nums1)  // å‡åº
    sort.Ints(nums2)  // å‡åº

    operations := 0
    i, j := len(nums1)-1, 0

    for diff &gt; 0 &amp;&amp; (i &gt;= 0 || j &lt; len(nums2)) {
        // è®¡ç®— nums1[i] èƒ½å‡å°‘çš„æœ€å¤§å€¼
        reduce := 0
        if i &gt;= 0 {
            reduce = nums1[i] - 1
        }

        // è®¡ç®— nums2[j] èƒ½å¢åŠ çš„æœ€å¤§å€¼
        increase := 0
        if j &lt; len(nums2) {
            increase = 6 - nums2[j]
        }

        // é€‰æ‹©å˜åŒ–é‡æ›´å¤§çš„æ“ä½œ
        if reduce &gt;= increase {
            diff -= reduce
            i--
        } else {
            diff -= increase
            j++
        }
        operations++

        // å¦‚æœ diff &lt;= 0ï¼Œæå‰ç»“æŸ
        if diff &lt;= 0 {
            return operations
        }
    }

    return -1
}
</code></pre>

<h4 id="c-å®ç°-6">C++ å®ç°</h4>

<pre><code>class Solution {
public:
    int minOperations(vector&lt;int&gt;&amp; nums1, vector&lt;int&gt;&amp; nums2) {
        int sum1 = accumulate(nums1.begin(), nums1.end(), 0);
        int sum2 = accumulate(nums2.begin(), nums2.end(), 0);

        // ç¡®ä¿ sum1 &gt;= sum2
        if (sum1 &lt; sum2) {
            swap(nums1, nums2);
            swap(sum1, sum2);
        }

        int diff = sum1 - sum2;
        if (diff == 0) return 0;

        // æ’åº
        sort(nums1.begin(), nums1.end());  // å‡åº
        sort(nums2.begin(), nums2.end());  // å‡åº

        int operations = 0;
        int i = nums1.size() - 1, j = 0;

        while (diff &gt; 0 &amp;&amp; (i &gt;= 0 || j &lt; nums2.size())) {
            int reduce = (i &gt;= 0) ? nums1[i] - 1 : 0;
            int increase = (j &lt; nums2.size()) ? 6 - nums2[j] : 0;

            if (reduce &gt;= increase) {
                diff -= reduce;
                i--;
            } else {
                diff -= increase;
                j++;
            }
            operations++;

            if (diff &lt;= 0) {
                return operations;
            }
        }

        return -1;
    }
};
</code></pre>

<h3 id="å¤æ‚åº¦åˆ†æ-6">å¤æ‚åº¦åˆ†æ</h3>

<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(mlogm + nlogn)ï¼Œä¸»è¦æ˜¯æ’åºçš„å¤æ‚åº¦</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(1)ï¼ˆä¸è€ƒè™‘æ’åºçš„é€’å½’æ ˆç©ºé—´ï¼‰</li>
</ul>

<hr />

<h2 id="è§£æ³•å¯¹æ¯”-2">è§£æ³•å¯¹æ¯”</h2>

<table>
<thead>
<tr>
  <th>ç‰¹æ€§</th>
  <th>è§£æ³•ä¸€ï¼ˆæ’åºï¼‰</th>
  <th>è§£æ³•äºŒï¼ˆè®¡æ•°æ’åºï¼‰</th>
  <th>è§£æ³•ä¸‰ï¼ˆåŒæŒ‡é’ˆï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
  <td>æ—¶é—´å¤æ‚åº¦</td>
  <td>O((m+n)log(m+n))</td>
  <td>O(m+n)</td>
  <td>O(mlogm + nlogn)</td>
</tr>
<tr>
  <td>ç©ºé—´å¤æ‚åº¦</td>
  <td>O(m+n)</td>
  <td>O(1)</td>
  <td>O(1)ï¼ˆä¸è€ƒè™‘é€’å½’æ ˆï¼‰</td>
</tr>
<tr>
  <td>å®ç°éš¾åº¦</td>
  <td>ç®€å•</td>
  <td>ä¸­ç­‰</td>
  <td>ä¸­ç­‰</td>
</tr>
<tr>
  <td>é€‚ç”¨åœºæ™¯</td>
  <td>é€šç”¨</td>
  <td>å…ƒç´ èŒƒå›´æœ‰é™æ—¶æœ€ä¼˜</td>
  <td>éœ€è¦å‡å°‘é¢å¤–ç©ºé—´æ—¶</td>
</tr>
<tr>
  <td>å®é™…æ€§èƒ½</td>
  <td>è¾ƒæ…¢</td>
  <td>æœ€å¿«</td>
  <td>ä¸­ç­‰</td>
</tr>
</tbody>
</table>

<h3 id="æ¨èè§£æ³•-2">æ¨èè§£æ³•</h3>

<p><strong>è§£æ³•äºŒï¼ˆè®¡æ•°æ’åºï¼‰æ˜¯æœ€ä¼˜è§£</strong>ï¼Œå› ä¸ºï¼š
1. æ—¶é—´å¤æ‚åº¦ O(m+n)ï¼Œæ˜¯æœ€ä¼˜çš„
2. ç©ºé—´å¤æ‚åº¦ O(1)ï¼Œåªéœ€è¦å¸¸æ•°ç©ºé—´
3. åˆ©ç”¨äº†é¢˜ç›®ä¸­å…ƒç´ å€¼èŒƒå›´æœ‰é™ï¼ˆ1~6ï¼‰çš„ç‰¹æ€§
4. å®ç°ç›¸å¯¹ç®€å•ï¼Œæ€§èƒ½æœ€å¥½</p>

<h3 id="å…³é”®ç‚¹æ€»ç»“">å…³é”®ç‚¹æ€»ç»“</h3>

<ol>
<li><strong>è´ªå¿ƒç­–ç•¥</strong>ï¼šæ¯æ¬¡é€‰æ‹©èƒ½å¸¦æ¥æœ€å¤§å˜åŒ–é‡çš„æ“ä½œ</li>
<li><strong>å˜åŒ–é‡è®¡ç®—</strong>ï¼š
<ul>
<li>å¯¹äºéœ€è¦å‡å°‘çš„å…ƒç´ ï¼šå˜åŒ–é‡ = å½“å‰å€¼ - 1</li>
<li>å¯¹äºéœ€è¦å¢åŠ çš„å…ƒç´ ï¼šå˜åŒ–é‡ = 6 - å½“å‰å€¼</li>
</ul></li>
<li><strong>ä¼˜åŒ–æŠ€å·§</strong>ï¼šåˆ©ç”¨å…ƒç´ å€¼èŒƒå›´æœ‰é™çš„ç‰¹ç‚¹ï¼Œä½¿ç”¨è®¡æ•°æ’åºä»£æ›¿é€šç”¨æ’åº</li>
<li><strong>è¾¹ç•Œå¤„ç†</strong>ï¼šæ³¨æ„ diff ä¸º 0 çš„æƒ…å†µå’Œæ— æ³•è¾¾æˆçš„æƒ…å†µ</li>
</ol>

<p>åœ¨å®é™…é¢è¯•ä¸­ï¼Œå»ºè®®å…ˆæå‡ºè§£æ³•ä¸€ï¼ˆé€šç”¨è´ªå¿ƒï¼‰ï¼Œç„¶åä¼˜åŒ–åˆ°è§£æ³•äºŒï¼ˆè®¡æ•°æ’åºï¼‰ï¼Œå±•ç¤ºå¯¹é—®é¢˜ç‰¹æ€§çš„ç†è§£å’Œä¼˜åŒ–èƒ½åŠ›ã€‚</p>

<hr />

<p><em>è·å–æ—¶é—´: 2026-02-26 19:54:37</em></p>

<hr />

<h1 id="2836-åœ¨ä¼ çƒæ¸¸æˆä¸­æœ€å¤§åŒ–å‡½æ•°å€¼">2836. åœ¨ä¼ çƒæ¸¸æˆä¸­æœ€å¤§åŒ–å‡½æ•°å€¼</h1>

<p><strong>éš¾åº¦</strong>: Hard</p>

<p><strong>æ ‡ç­¾</strong>: ä½è¿ç®—, æ•°ç»„, åŠ¨æ€è§„åˆ’</p>

<p><strong>é“¾æ¥</strong>: https://leetcode.cn/problems/maximize-value-of-function-in-a-ball-passing-game/</p>

<hr />

<h2 id="é¢˜ç›®æè¿°-3">é¢˜ç›®æè¿°</h2>

<p>ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º <code>n</code>&nbsp;ä¸‹æ ‡ä» <strong>0</strong>&nbsp;å¼€å§‹çš„æ•´æ•°æ•°ç»„&nbsp;<code>receiver</code>&nbsp;å’Œä¸€ä¸ªæ•´æ•°&nbsp;<code>k</code>&nbsp;ã€‚</p>

<p>æ€»å…±æœ‰&nbsp;<code>n</code>&nbsp;åç©å®¶ï¼Œç©å®¶ <strong>ç¼–å·</strong>&nbsp;äº’ä¸ç›¸åŒï¼Œä¸”ä¸º&nbsp;<code>[0, n - 1]</code>&nbsp;ä¸­çš„æ•´æ•°ã€‚è¿™äº›ç©å®¶ç©ä¸€ä¸ªä¼ çƒæ¸¸æˆï¼Œ<code>receiver[i]</code>&nbsp;è¡¨ç¤ºç¼–å·ä¸º <code>i</code>&nbsp;çš„ç©å®¶ä¼šä¼ çƒç»™ç¼–å·ä¸º <code>receiver[i]</code>&nbsp;çš„ç©å®¶ã€‚ç©å®¶å¯ä»¥ä¼ çƒç»™è‡ªå·±ï¼Œä¹Ÿå°±æ˜¯è¯´&nbsp;<code>receiver[i]</code>&nbsp;å¯èƒ½ç­‰äº&nbsp;<code>i</code>&nbsp;ã€‚</p>

<p>ä½ éœ€è¦ä» <code>n</code>&nbsp;åç©å®¶ä¸­é€‰æ‹©ä¸€åç©å®¶ä½œä¸ºæ¸¸æˆå¼€å§‹æ—¶å”¯ä¸€æ‰‹ä¸­æœ‰çƒçš„ç©å®¶ï¼Œçƒä¼šè¢«ä¼  <strong>æ°å¥½</strong>&nbsp;<code>k</code>&nbsp;æ¬¡ã€‚</p>

<p>å¦‚æœé€‰æ‹©ç¼–å·ä¸º <code>x</code>&nbsp;çš„ç©å®¶ä½œä¸ºå¼€å§‹ç©å®¶ï¼Œå®šä¹‰å‡½æ•°&nbsp;<code>f(x)</code>&nbsp;è¡¨ç¤ºä»ç¼–å·ä¸º&nbsp;<code>x</code>&nbsp;çš„ç©å®¶å¼€å§‹ï¼Œ<code>k</code>&nbsp;æ¬¡ä¼ çƒå†…æ‰€æœ‰æ¥è§¦è¿‡çƒç©å®¶çš„ç¼–å·ä¹‹&nbsp;<strong>å’Œ</strong>&nbsp;ï¼Œå¦‚æœæœ‰ç©å®¶å¤šæ¬¡è§¦çƒï¼Œåˆ™ <strong>ç´¯åŠ å¤šæ¬¡</strong>&nbsp;ã€‚æ¢å¥è¯è¯´ï¼Œ&nbsp;<code>f(x) = x + receiver[x] + receiver[receiver[x]] + ... + receiver<sup>(k)</sup>[x]</code>&nbsp;ã€‚</p>

<p>ä½ çš„ä»»åŠ¡æ—¶é€‰æ‹©å¼€å§‹ç©å®¶ <code>x</code>&nbsp;ï¼Œç›®çš„æ˜¯<strong>&nbsp;æœ€å¤§åŒ–</strong>&nbsp;<code>f(x)</code>&nbsp;ã€‚</p>

<p>è¯·ä½ è¿”å›å‡½æ•°çš„ <strong>æœ€å¤§å€¼</strong>&nbsp;ã€‚</p>

<p><strong>æ³¨æ„ï¼š</strong><code>receiver</code>&nbsp;å¯èƒ½å«æœ‰é‡å¤å…ƒç´ ã€‚</p>

<p>&nbsp;</p>

<p><strong class="example">ç¤ºä¾‹ 1ï¼š</strong></p>

<table border="1" cellspacing="3" style="border-collapse: separate; text-align: center;">
    <tbody>
        <tr>
            <th style="padding: 5px; border: 1px solid black;">ä¼ é€’æ¬¡æ•°</th>
            <th style="padding: 5px; border: 1px solid black;">ä¼ çƒè€…ç¼–å·</th>
            <th style="padding: 5px; border: 1px solid black;">æ¥çƒè€…ç¼–å·</th>
            <th style="padding: 5px; border: 1px solid black;">x + æ‰€æœ‰æ¥çƒè€…ç¼–å·</th>
        </tr>
        <tr>
            <td style="padding: 5px; border: 1px solid black;">&nbsp;</td>
            <td style="padding: 5px; border: 1px solid black;">&nbsp;</td>
            <td style="padding: 5px; border: 1px solid black;">&nbsp;</td>
            <td style="padding: 5px; border: 1px solid black;">2</td>
        </tr>
        <tr>
            <td style="padding: 5px; border: 1px solid black;">1</td>
            <td style="padding: 5px; border: 1px solid black;">2</td>
            <td style="padding: 5px; border: 1px solid black;">1</td>
            <td style="padding: 5px; border: 1px solid black;">3</td>
        </tr>
        <tr>
            <td style="padding: 5px; border: 1px solid black;">2</td>
            <td style="padding: 5px; border: 1px solid black;">1</td>
            <td style="padding: 5px; border: 1px solid black;">0</td>
            <td style="padding: 5px; border: 1px solid black;">3</td>
        </tr>
        <tr>
            <td style="padding: 5px; border: 1px solid black;">3</td>
            <td style="padding: 5px; border: 1px solid black;">0</td>
            <td style="padding: 5px; border: 1px solid black;">2</td>
            <td style="padding: 5px; border: 1px solid black;">5</td>
        </tr>
        <tr>
            <td style="padding: 5px; border: 1px solid black;">4</td>
            <td style="padding: 5px; border: 1px solid black;">2</td>
            <td style="padding: 5px; border: 1px solid black;">1</td>
            <td style="padding: 5px; border: 1px solid black;">6</td>
        </tr>
    </tbody>
</table>

<p>&nbsp;</p>

<pre>
<b>è¾“å…¥ï¼š</b>receiver = [2,0,1], k = 4
<b>è¾“å‡ºï¼š</b>6
<b>è§£é‡Šï¼š</b>ä¸Šè¡¨å±•ç¤ºäº†ä»ç¼–å·ä¸º x = 2 å¼€å§‹çš„æ¸¸æˆè¿‡ç¨‹ã€‚
ä»è¡¨ä¸­å¯çŸ¥ï¼Œf(2) ç­‰äº 6 ã€‚
6 æ˜¯èƒ½å¾—åˆ°æœ€å¤§çš„å‡½æ•°å€¼ã€‚
æ‰€ä»¥è¾“å‡ºä¸º 6 ã€‚
</pre>

<p><strong class="example">ç¤ºä¾‹ 2ï¼š</strong></p>

<table border="1" cellspacing="3" style="border-collapse: separate; text-align: center;">
    <tbody>
        <tr>
            <th style="padding: 5px; border: 1px solid black;">ä¼ é€’æ¬¡æ•°</th>
            <th style="padding: 5px; border: 1px solid black;">ä¼ çƒè€…ç¼–å·</th>
            <th style="padding: 5px; border: 1px solid black;">æ¥çƒè€…ç¼–å·</th>
            <th style="padding: 5px; border: 1px solid black;">x + æ‰€æœ‰æ¥çƒè€…ç¼–å·</th>
        </tr>
        <tr>
            <td style="padding: 5px; border: 1px solid black;">&nbsp;</td>
            <td style="padding: 5px; border: 1px solid black;">&nbsp;</td>
            <td style="padding: 5px; border: 1px solid black;">&nbsp;</td>
            <td style="padding: 5px; border: 1px solid black;">4</td>
        </tr>
        <tr>
            <td style="padding: 5px; border: 1px solid black;">1</td>
            <td style="padding: 5px; border: 1px solid black;">4</td>
            <td style="padding: 5px; border: 1px solid black;">3</td>
            <td style="padding: 5px; border: 1px solid black;">7</td>
        </tr>
        <tr>
            <td style="padding: 5px; border: 1px solid black;">2</td>
            <td style="padding: 5px; border: 1px solid black;">3</td>
            <td style="padding: 5px; border: 1px solid black;">2</td>
            <td style="padding: 5px; border: 1px solid black;">9</td>
        </tr>
        <tr>
            <td style="padding: 5px; border: 1px solid black;">3</td>
            <td style="padding: 5px; border: 1px solid black;">2</td>
            <td style="padding: 5px; border: 1px solid black;">1</td>
            <td style="padding: 5px; border: 1px solid black;">10</td>
        </tr>
    </tbody>
</table>

<p>&nbsp;</p>

<pre>
<b>è¾“å…¥ï¼š</b>receiver = [1,1,1,2,3], k = 3
<b>è¾“å‡ºï¼š</b>10
<b>è§£é‡Šï¼š</b>ä¸Šè¡¨å±•ç¤ºäº†ä»ç¼–å·ä¸º x = 4 å¼€å§‹çš„æ¸¸æˆè¿‡ç¨‹ã€‚
ä»è¡¨ä¸­å¯çŸ¥ï¼Œf(4) ç­‰äº 10 ã€‚
10 æ˜¯èƒ½å¾—åˆ°æœ€å¤§çš„å‡½æ•°å€¼ã€‚
æ‰€ä»¥è¾“å‡ºä¸º 10 ã€‚
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
    <li><code>1 &lt;= receiver.length == n &lt;= 10<sup>5</sup></code></li>
    <li><code>0 &lt;= receiver[i] &lt;= n - 1</code></li>
    <li><code>1 &lt;= k &lt;= 10<sup>10</sup></code></li>
</ul>

<hr />

<h2 id="ä»£ç æ¨¡æ¿-3">ä»£ç æ¨¡æ¿</h2>

<h3 id="c-3">C++</h3>

<pre><code>class Solution {
public:
    long long getMaxFunctionValue(vector&lt;int&gt;&amp; receiver, long long k) {

    }
};
</code></pre>

<h3 id="java-3">Java</h3>

<pre><code>class Solution {
    public long getMaxFunctionValue(List&lt;Integer&gt; receiver, long k) {

    }
}
</code></pre>

<h3 id="python3-3">Python3</h3>

<pre><code>class Solution:
    def getMaxFunctionValue(self, receiver: List[int], k: int) -&gt; int:

</code></pre>

<h3 id="javascript-3">JavaScript</h3>

<pre><code>/**
 * @param {number[]} receiver
 * @param {number} k
 * @return {number}
 */
var getMaxFunctionValue = function(receiver, k) {

};
</code></pre>

<h3 id="go-3">Go</h3>

<pre><code>func getMaxFunctionValue(receiver []int, k int64) int64 {

}
</code></pre>

<hr />

<h2 id="æç¤º-3">æç¤º</h2>

<ol>
<li><div class="_1l1MA">We can solve the problem using binary lifting.</div></li>
<li><div class="_1l1MA">For each player with id <code>x</code> and for every <code>i</code> in the range <code>[0, ceil(log<sub>2</sub>k)]</code>, we can determine the last receiver's id and compute the sum of player ids who receive the ball after <code>2<sup>i</sup></code> passes, starting from <code>x</code>.</div></li>
<li><div class="_1l1MA">Let <code>last<em>receiver[x][i] =</code> the last receiver's id after <code>2<sup>i</sup></code> passes, and <code>sum[x][i] =</code> the sum of player ids who receive the ball after <code>2<sup>i</sup></code> passes. For all <code>x</code> in the range <code>[0, n - 1]</code>, <code>last</em>receiver[x][0] = receiver[x]</code>, and <code>sum[x][0] = receiver[x]</code>.</div></li>
<li><div class="_1l1MA">Then for <code>i</code> in range <code>[1, ceil(log<sub>2</sub>k)]</code>,Â <code>last<em>receiver[x][i] = last</em>receiver[last<em>receiver[x][i - 1]][i - 1]</code> and <code>sum[x][i] = sum[x][i - 1] + sum[last</em>receiver[x][i - 1]][i - 1]</code>, for all <code>x</code> in the range <code>[0, n - 1]</code>.</div></li>
<li><div class="_1l1MA">Starting from each player id <code>x</code>, we can now go through the powers of <code>2</code> in the binary representation of <code>k</code> and make jumps corresponding to each power, using the pre-computed values, to compute <code>f(x)</code>.</div></li>
<li><div class="_1l1MA">The answer is the maximum <code>f(x)</code> from each player id.</div></li>
</ol>

<hr />

<h2 id="ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹-3">ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹</h2>

<pre><code>[2,0,1]
4
</code></pre>

<hr />

<h2 id="ai-è§£ç­”-deepseek-3">AI è§£ç­” (DeepSeek)</h2>

<h2 id="é¢˜ç›®åˆ†æ-3">é¢˜ç›®åˆ†æ</h2>

<p>é¢˜ç›®æè¿°äº†ä¸€ä¸ªä¼ çƒæ¸¸æˆï¼š
- æœ‰ n ä¸ªç©å®¶ï¼Œç¼–å· 0 åˆ° n-1
- æ•°ç»„ <code>receiver[i]</code> è¡¨ç¤ºç©å®¶ i ä¼šä¼ çƒç»™ç©å®¶ <code>receiver[i]</code>
- å¯ä»¥é€‰æ‹©ä»»æ„ç©å®¶ x ä½œä¸ºèµ·å§‹ç©å®¶
- çƒä¼šè¢«ä¼ æ°å¥½ k æ¬¡
- å®šä¹‰ <code>f(x) = x + receiver[x] + receiver[receiver[x]] + ... + receiver^(k)[x]</code>
- ç›®æ ‡æ˜¯æœ€å¤§åŒ– <code>f(x)</code></p>

<p><strong>å…³é”®ç‚¹</strong>ï¼š
1. k æœ€å¤§å¯è¾¾ 10^10ï¼Œä¸èƒ½æ¨¡æ‹Ÿ k æ­¥
2. n æœ€å¤§ 10^5ï¼Œéœ€è¦é«˜æ•ˆç®—æ³•
3. ä¼ çƒè·¯å¾„å¯èƒ½å½¢æˆç¯
4. éœ€è¦å¿«é€Ÿè®¡ç®—ä»æ¯ä¸ªç‚¹å‡ºå‘èµ° k æ­¥çš„è·¯å¾„å’Œ</p>

<h2 id="è§£é¢˜æ€è·¯-5">è§£é¢˜æ€è·¯</h2>

<h3 id="æ ¸å¿ƒæ€æƒ³äºŒè¿›åˆ¶å€å¢binary-lifting">æ ¸å¿ƒæ€æƒ³ï¼šäºŒè¿›åˆ¶å€å¢ï¼ˆBinary Liftingï¼‰</h3>

<p>ç”±äº k å¾ˆå¤§ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ O(log k) æ—¶é—´å†…è®¡ç®—ä»ä»»æ„ç‚¹å‡ºå‘èµ° k æ­¥çš„è·¯å¾„å’Œã€‚è¿™å¯ä»¥é€šè¿‡é¢„å¤„ç†æ¥å®ç°ï¼š
- <code>jump[i][j]</code>ï¼šä» i å‡ºå‘èµ° 2^j æ­¥åˆ°è¾¾çš„èŠ‚ç‚¹
- <code>sum[i][j]</code>ï¼šä» i å‡ºå‘èµ° 2^j æ­¥çš„è·¯å¾„å’Œï¼ˆåŒ…æ‹¬èµ·ç‚¹ï¼‰</p>

<h3 id="ç®—æ³•æ­¥éª¤">ç®—æ³•æ­¥éª¤ï¼š</h3>

<ol>
<li>é¢„å¤„ç†äºŒè¿›åˆ¶è·³è·ƒè¡¨</li>
<li>å¯¹äºæ¯ä¸ªèµ·å§‹ç‚¹ xï¼Œä½¿ç”¨äºŒè¿›åˆ¶åˆ†è§£è®¡ç®— k æ­¥çš„è·¯å¾„å’Œ</li>
<li>å–æ‰€æœ‰èµ·å§‹ç‚¹çš„æœ€å¤§å€¼</li>
</ol>

<h2 id="è§£æ³•ä¸€äºŒè¿›åˆ¶å€å¢æ ‡å‡†è§£æ³•">è§£æ³•ä¸€ï¼šäºŒè¿›åˆ¶å€å¢ï¼ˆæ ‡å‡†è§£æ³•ï¼‰</h2>

<h3 id="æ€è·¯-4">æ€è·¯</h3>

<ul>
<li>é¢„å¤„ç† <code>jump[i][j]</code> å’Œ <code>sum[i][j]</code></li>
<li><code>jump[i][0] = receiver[i]</code></li>
<li><code>sum[i][0] = i</code>ï¼ˆæ³¨æ„ï¼šè¿™é‡ŒåªåŒ…å«èµ·ç‚¹ iï¼Œä¸åŒ…å« receiver[i]ï¼‰</li>
<li>é€’æ¨å…¬å¼ï¼š
<ul>
<li><code>jump[i][j] = jump[jump[i][j-1]][j-1]</code></li>
<li><code>sum[i][j] = sum[i][j-1] + sum[jump[i][j-1]][j-1]</code></li>
</ul></li>
<li>è®¡ç®— f(x) æ—¶ï¼Œä» x å‡ºå‘ï¼ŒæŒ‰ k çš„äºŒè¿›åˆ¶ä½ç´¯åŠ </li>
</ul>

<h3 id="ä»£ç å®ç°-7">ä»£ç å®ç°</h3>

<pre><code>func getMaxFunctionValue(receiver []int, k int64) int64 {
    n := len(receiver)
    m := 0
    for (1 &lt;&lt; m) &lt;= int(k) {
        m++
    }
    m++ // å¤šå¼€ä¸€ä½ä¿è¯å®‰å…¨

    // jump[i][j]: ä» i å‡ºå‘èµ° 2^j æ­¥åˆ°è¾¾çš„èŠ‚ç‚¹
    jump := make([][]int, n)
    // sum[i][j]: ä» i å‡ºå‘èµ° 2^j æ­¥çš„è·¯å¾„å’Œï¼ˆåŒ…å«èµ·ç‚¹ï¼‰
    sum := make([][]int64, n)
    for i := 0; i &lt; n; i++ {
        jump[i] = make([]int, m)
        sum[i] = make([]int64, m)
    }

    // åˆå§‹åŒ–
    for i := 0; i &lt; n; i++ {
        jump[i][0] = receiver[i]
        sum[i][0] = int64(i) // åªåŒ…å«èµ·ç‚¹
    }

    // é¢„å¤„ç†å€å¢è¡¨
    for j := 1; j &lt; m; j++ {
        for i := 0; i &lt; n; i++ {
            mid := jump[i][j-1]
            jump[i][j] = jump[mid][j-1]
            sum[i][j] = sum[i][j-1] + sum[mid][j-1]
        }
    }

    var ans int64 = 0
    // å¯¹æ¯ä¸ªèµ·ç‚¹è®¡ç®— f(x)
    for x := 0; x &lt; n; x++ {
        cur := x
        var total int64 = 0
        kk := k

        for j := 0; j &lt; m; j++ {
            if (kk&gt;&gt;j)&amp;1 == 1 {
                total += sum[cur][j]
                cur = jump[cur][j]
            }
        }
        // æ³¨æ„ï¼šæœ€åè¦åŠ ä¸Šç»ˆç‚¹çš„å€¼
        // å› ä¸º sum[cur][j] åªåŒ…å«èµ·ç‚¹ï¼Œä¸åŒ…å«ç»ˆç‚¹
        // è€Œ f(x) éœ€è¦åŒ…å«æ‰€æœ‰ç»è¿‡çš„èŠ‚ç‚¹
        total += int64(cur)

        if total &gt; ans {
            ans = total
        }
    }

    return ans
}
</code></pre>

<pre><code>#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
using namespace std;

class Solution {
public:
    long long getMaxFunctionValue(vector&lt;int&gt;&amp; receiver, long long k) {
        int n = receiver.size();
        int m = 0;
        while ((1LL &lt;&lt; m) &lt;= k) m++;
        m++; // å¤šå¼€ä¸€ä½

        // jump[i][j]: ä» i å‡ºå‘èµ° 2^j æ­¥åˆ°è¾¾çš„èŠ‚ç‚¹
        vector&lt;vector&lt;int&gt;&gt; jump(n, vector&lt;int&gt;(m));
        // sum[i][j]: ä» i å‡ºå‘èµ° 2^j æ­¥çš„è·¯å¾„å’Œï¼ˆåŒ…å«èµ·ç‚¹ï¼‰
        vector&lt;vector&lt;long long&gt;&gt; sum(n, vector&lt;long long&gt;(m));

        // åˆå§‹åŒ–
        for (int i = 0; i &lt; n; i++) {
            jump[i][0] = receiver[i];
            sum[i][0] = i; // åªåŒ…å«èµ·ç‚¹
        }

        // é¢„å¤„ç†å€å¢è¡¨
        for (int j = 1; j &lt; m; j++) {
            for (int i = 0; i &lt; n; i++) {
                int mid = jump[i][j-1];
                jump[i][j] = jump[mid][j-1];
                sum[i][j] = sum[i][j-1] + sum[mid][j-1];
            }
        }

        long long ans = 0;
        // å¯¹æ¯ä¸ªèµ·ç‚¹è®¡ç®— f(x)
        for (int x = 0; x &lt; n; x++) {
            int cur = x;
            long long total = 0;
            long long kk = k;

            for (int j = 0; j &lt; m; j++) {
                if ((kk &gt;&gt; j) &amp; 1) {
                    total += sum[cur][j];
                    cur = jump[cur][j];
                }
            }
            // åŠ ä¸Šç»ˆç‚¹çš„å€¼
            total += cur;

            ans = max(ans, total);
        }

        return ans;
    }
};
</code></pre>

<h3 id="å¤æ‚åº¦åˆ†æ-7">å¤æ‚åº¦åˆ†æ</h3>

<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n log k)
<ul>
<li>é¢„å¤„ç†ï¼šO(n log k)</li>
<li>æŸ¥è¯¢æ¯ä¸ªèµ·ç‚¹ï¼šO(n log k)</li>
</ul></li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n log k)</li>
</ul>

<h2 id="è§£æ³•äºŒäºŒè¿›åˆ¶å€å¢ä¼˜åŒ–ç©ºé—´">è§£æ³•äºŒï¼šäºŒè¿›åˆ¶å€å¢ï¼ˆä¼˜åŒ–ç©ºé—´ï¼‰</h2>

<h3 id="æ€è·¯-5">æ€è·¯</h3>

<ul>
<li>æ³¨æ„åˆ° k æœ€å¤§ 10^10ï¼Œlog2(k) â‰ˆ 34</li>
<li>ä½† n æœ€å¤§ 10^5ï¼Œn * log k çš„ç©ºé—´å¯èƒ½è¾ƒå¤§</li>
<li>å¯ä»¥ä¼˜åŒ–ï¼šåªå­˜å‚¨å¿…è¦çš„è·³è·ƒä¿¡æ¯ï¼Œæˆ–è€…ä½¿ç”¨æ»šåŠ¨æ•°ç»„</li>
</ul>

<h3 id="ä»£ç å®ç°-8">ä»£ç å®ç°</h3>

<pre><code>func getMaxFunctionValue(receiver []int, k int64) int64 {
    n := len(receiver)
    m := 0
    for (1 &lt;&lt; m) &lt;= int(k) {
        m++
    }
    m++

    // ä½¿ç”¨ä¸¤ä¸ªæ•°ç»„äº¤æ›¿è®¡ç®—
    jump := make([]int, n)
    nextJump := make([]int, n)
    sum := make([]int64, n)
    nextSum := make([]int64, n)

    // åˆå§‹åŒ–
    for i := 0; i &lt; n; i++ {
        jump[i] = receiver[i]
        sum[i] = int64(i)
    }

    var ans int64 = 0
    kk := k

    for j := 0; j &lt; m; j++ {
        if (kk&gt;&gt;j)&amp;1 == 1 {
            // è®¡ç®—å½“å‰äºŒè¿›åˆ¶ä½çš„è´¡çŒ®
            for i := 0; i &lt; n; i++ {
                nextJump[i] = jump[jump[i]]
                nextSum[i] = sum[i] + sum[jump[i]]
            }
            // æ›´æ–°ç­”æ¡ˆ
            for i := 0; i &lt; n; i++ {
                curAns := nextSum[i] + int64(nextJump[i])
                if curAns &gt; ans {
                    ans = curAns
                }
            }
            // äº¤æ¢æ•°ç»„
            jump, nextJump = nextJump, jump
            sum, nextSum = nextSum, sum
        }

        // å‡†å¤‡ä¸‹ä¸€è½®
        if j &lt; m-1 {
            for i := 0; i &lt; n; i++ {
                nextJump[i] = jump[jump[i]]
                nextSum[i] = sum[i] + sum[jump[i]]
            }
            jump, nextJump = nextJump, jump
            sum, nextSum = nextSum, sum
        }
    }

    return ans
}
</code></pre>

<pre><code>#include &lt;vector&gt;
#include &lt;algorithm&gt;
using namespace std;

class Solution {
public:
    long long getMaxFunctionValue(vector&lt;int&gt;&amp; receiver, long long k) {
        int n = receiver.size();
        int m = 0;
        while ((1LL &lt;&lt; m) &lt;= k) m++;
        m++;

        vector&lt;int&gt; jump(n), nextJump(n);
        vector&lt;long long&gt; sum(n), nextSum(n);

        // åˆå§‹åŒ–
        for (int i = 0; i &lt; n; i++) {
            jump[i] = receiver[i];
            sum[i] = i;
        }

        long long ans = 0;
        long long kk = k;

        for (int j = 0; j &lt; m; j++) {
            if ((kk &gt;&gt; j) &amp; 1) {
                // è®¡ç®—å½“å‰äºŒè¿›åˆ¶ä½çš„è´¡çŒ®
                for (int i = 0; i &lt; n; i++) {
                    nextJump[i] = jump[jump[i]];
                    nextSum[i] = sum[i] + sum[jump[i]];
                }
                // æ›´æ–°ç­”æ¡ˆ
                for (int i = 0; i &lt; n; i++) {
                    long long curAns = nextSum[i] + nextJump[i];
                    ans = max(ans, curAns);
                }
                // äº¤æ¢
                swap(jump, nextJump);
                swap(sum, nextSum);
            }

            // å‡†å¤‡ä¸‹ä¸€è½®
            if (j &lt; m - 1) {
                for (int i = 0; i &lt; n; i++) {
                    nextJump[i] = jump[jump[i]];
                    nextSum[i] = sum[i] + sum[jump[i]];
                }
                swap(jump, nextJump);
                swap(sum, nextSum);
            }
        }

        return ans;
    }
};
</code></pre>

<h3 id="å¤æ‚åº¦åˆ†æ-8">å¤æ‚åº¦åˆ†æ</h3>

<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n log k)</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼ˆä¼˜åŒ–äº†ç©ºé—´ï¼‰</li>
</ul>

<h2 id="è§£æ³•ä¸‰ç¯åˆ†è§£-å€å¢">è§£æ³•ä¸‰ï¼šç¯åˆ†è§£ + å€å¢</h2>

<h3 id="æ€è·¯-6">æ€è·¯</h3>

<ol>
<li>ç”±äºä¼ çƒå…³ç³»å½¢æˆåŠŸèƒ½å›¾ï¼ˆæ¯ä¸ªç‚¹å‡ºåº¦ä¸º1ï¼‰ï¼Œæ‰€ä»¥æ¯ä¸ªè¿é€šåˆ†é‡æ˜¯ä¸€ä¸ªç¯åŠ ä¸Šæ ‘æ</li>
<li>å¯¹äºæ¯ä¸ªç‚¹ï¼Œèµ°è¶³å¤Ÿå¤šæ­¥åä¸€å®šä¼šè¿›å…¥ç¯</li>
<li>å¯ä»¥å…ˆç”¨å€å¢æ‰¾åˆ°è¿›å…¥ç¯åçš„ä½ç½®ï¼Œç„¶åè®¡ç®—ç¯ä¸Šçš„è´¡çŒ®</li>
</ol>

<h3 id="ä»£ç å®ç°-9">ä»£ç å®ç°</h3>

<pre><code>func getMaxFunctionValue(receiver []int, k int64) int64 {
    n := len(receiver)
    m := 0
    for (1 &lt;&lt; m) &lt;= int(k) {
        m++
    }
    m++

    jump := make([][]int, n)
    sum := make([][]int64, n)
    for i := 0; i &lt; n; i++ {
        jump[i] = make([]int, m)
        sum[i] = make([]int64, m)
    }

    // åˆå§‹åŒ–
    for i := 0; i &lt; n; i++ {
        jump[i][0] = receiver[i]
        sum[i][0] = int64(i)
    }

    // é¢„å¤„ç†
    for j := 1; j &lt; m; j++ {
        for i := 0; i &lt; n; i++ {
            mid := jump[i][j-1]
            jump[i][j] = jump[mid][j-1]
            sum[i][j] = sum[i][j-1] + sum[mid][j-1]
        }
    }

    var ans int64 = 0
    for x := 0; x &lt; n; x++ {
        cur := x
        var total int64 = 0
        kk := k

        for j := 0; j &lt; m; j++ {
            if (kk&gt;&gt;j)&amp;1 == 1 {
                total += sum[cur][j]
                cur = jump[cur][j]
            }
        }
        total += int64(cur)

        if total &gt; ans {
            ans = total
        }
    }

    return ans
}
</code></pre>

<pre><code>#include &lt;vector&gt;
#include &lt;algorithm&gt;
using namespace std;

class Solution {
public:
    long long getMaxFunctionValue(vector&lt;int&gt;&amp; receiver, long long k) {
        int n = receiver.size();
        int m = 0;
        while ((1LL &lt;&lt; m) &lt;= k) m++;
        m++;

        vector&lt;vector&lt;int&gt;&gt; jump(n, vector&lt;int&gt;(m));
        vector&lt;vector&lt;long long&gt;&gt; sum(n, vector&lt;long long&gt;(m));

        // åˆå§‹åŒ–
        for (int i = 0; i &lt; n; i++) {
            jump[i][0] = receiver[i];
            sum[i][0] = i;
        }

        // é¢„å¤„ç†
        for (int j = 1; j &lt; m; j++) {
            for (int i = 0; i &lt; n; i++) {
                int mid = jump[i][j-1];
                jump[i][j] = jump[mid][j-1];
                sum[i][j] = sum[i][j-1] + sum[mid][j-1];
            }
        }

        long long ans = 0;
        for (int x = 0; x &lt; n; x++) {
            int cur = x;
            long long total = 0;
            long long kk = k;

            for (int j = 0; j &lt; m; j++) {
                if ((kk &gt;&gt; j) &amp; 1) {
                    total += sum[cur][j];
                    cur = jump[cur][j];
                }
            }
            total += cur;

            ans = max(ans, total);
        }

        return ans;
    }
};
</code></pre>

<h3 id="å¤æ‚åº¦åˆ†æ-9">å¤æ‚åº¦åˆ†æ</h3>

<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n log k)</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n log k)</li>
</ul>

<h2 id="è§£æ³•å¯¹æ¯”-3">è§£æ³•å¯¹æ¯”</h2>

<table>
<thead>
<tr>
  <th>è§£æ³•</th>
  <th>æ—¶é—´å¤æ‚åº¦</th>
  <th>ç©ºé—´å¤æ‚åº¦</th>
  <th>ä¼˜ç‚¹</th>
  <th>ç¼ºç‚¹</th>
</tr>
</thead>
<tbody>
<tr>
  <td>è§£æ³•ä¸€ï¼šæ ‡å‡†å€å¢</td>
  <td>O(n log k)</td>
  <td>O(n log k)</td>
  <td>æ€è·¯æ¸…æ™°ï¼Œå®ç°ç®€å•</td>
  <td>ç©ºé—´å¼€é”€è¾ƒå¤§</td>
</tr>
<tr>
  <td>è§£æ³•äºŒï¼šä¼˜åŒ–ç©ºé—´</td>
  <td>O(n log k)</td>
  <td>O(n)</td>
  <td>ç©ºé—´ä¼˜åŒ–ï¼Œé€‚åˆå†…å­˜ç´§å¼ </td>
  <td>å®ç°ç¨å¤æ‚ï¼Œå¸¸æ•°è¾ƒå¤§</td>
</tr>
<tr>
  <td>è§£æ³•ä¸‰ï¼šç¯åˆ†è§£+å€å¢</td>
  <td>O(n log k)</td>
  <td>O(n log k)</td>
  <td>åˆ©ç”¨å›¾ç‰¹æ€§ï¼Œç†è®ºæœ€ä¼˜</td>
  <td>å®ç°å¤æ‚ï¼Œå®é™…æ€§èƒ½å·®å¼‚ä¸å¤§</td>
</tr>
</tbody>
</table>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<ol>
<li><strong>æ¨èè§£æ³•ä¸€</strong>ï¼šæ ‡å‡†äºŒè¿›åˆ¶å€å¢æ³•ï¼Œæ€è·¯æ¸…æ™°ï¼Œä»£ç ç®€æ´ï¼Œåœ¨æ¯”èµ›ä¸­å®ç°å¿«é€Ÿ</li>
<li>å¯¹äºç‰¹åˆ«å¤§çš„ n å’Œ kï¼Œè§£æ³•äºŒçš„ç©ºé—´ä¼˜åŒ–æ›´æœ‰ä¼˜åŠ¿</li>
<li>å®é™…æ¯”èµ›ä¸­ï¼Œè§£æ³•ä¸€å·²ç»è¶³å¤Ÿï¼Œå› ä¸º n log k â‰ˆ 10^5 * 34 â‰ˆ 3.4M çš„è·³è·ƒè¡¨æ˜¯å¯ä»¥æ¥å—çš„</li>
</ol>

<p><strong>å…³é”®ç‚¹</strong>ï¼š
- äºŒè¿›åˆ¶å€å¢æ˜¯å¤„ç†å¤§ k é—®é¢˜çš„æ ‡å‡†æŠ€å·§
- æ³¨æ„ sum æ•°ç»„çš„å®šä¹‰ï¼šåªåŒ…å«èµ·ç‚¹ï¼Œä¸åŒ…å«ç»ˆç‚¹
- æœ€åéœ€è¦åŠ ä¸Šç»ˆç‚¹çš„å€¼
- é¢„å¤„ç†æ—¶æ³¨æ„æ•°ç»„å¤§å°ï¼Œm = log2(k) + 1</p>

<hr />

<p><em>è·å–æ—¶é—´: 2026-02-26 19:55:57</em></p>

        </div>
    </div>
</body>
</html>