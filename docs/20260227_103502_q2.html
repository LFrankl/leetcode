<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3478. é€‰å‡ºå’Œæœ€å¤§çš„ K ä¸ªå…ƒç´  - LeetCode</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <div class="top-bar">
        <button class="menu-button" onclick="history.back()" aria-label="è¿”å›">
            <div class="menu-icon">
                <span style="transform: rotate(-45deg) translateY(-2px);"></span>
                <span style="transform: rotate(45deg) translateY(2px);"></span>
            </div>
        </button>
        <div class="logo">
            <span class="logo-emoji">ğŸ“š</span>
            LeetCode æ¯æ—¥é¢˜ç›®
        </div>
        <div class="update-time">2026-02-27 10:35:02</div>
    </div>

    <!-- ä¸»å†…å®¹åŒº -->
    <div class="main-content" style="margin-left: 0;">
        <div class="content-wrapper">
            <button class="back-button" onclick="history.back()">
                â† è¿”å›é¢˜ç›®åˆ—è¡¨
            </button>

            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">3478. é€‰å‡ºå’Œæœ€å¤§çš„ K ä¸ªå…ƒç´ </span>
                    <span class="difficulty-badge difficulty-medium">
                        ä¸­ç­‰
                    </span>
                    <a href="https://leetcode.cn/problems/choose-k-elements-with-maximum-sum/" target="_blank" class="question-link">åœ¨ LeetCode æ‰“å¼€</a>
                </div>
                <div class="markdown-content">
                    <h1 id="3478-é€‰å‡ºå’Œæœ€å¤§çš„-k-ä¸ªå…ƒç´ ">3478. é€‰å‡ºå’Œæœ€å¤§çš„ K ä¸ªå…ƒç´ </h1>

<p><strong>éš¾åº¦</strong>: Medium</p>

<p><strong>æ ‡ç­¾</strong>: æ•°ç»„, æ’åº, å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰</p>

<p><strong>é“¾æ¥</strong>: https://leetcode.cn/problems/choose-k-elements-with-maximum-sum/</p>

<hr />

<h2 id="é¢˜ç›®æè¿°">é¢˜ç›®æè¿°</h2>

<p>ç»™ä½ ä¸¤ä¸ªæ•´æ•°æ•°ç»„ï¼Œ<code>nums1</code> å’Œ <code>nums2</code>ï¼Œé•¿åº¦å‡ä¸º <code>n</code>ï¼Œä»¥åŠä¸€ä¸ªæ­£æ•´æ•° <code>k</code> ã€‚</p>

<p>å¯¹ä» <code>0</code> åˆ° <code>n - 1</code> æ¯ä¸ªä¸‹æ ‡ <code>i</code> ï¼Œæ‰§è¡Œä¸‹è¿°æ“ä½œï¼š</p>

<ul>
    <li>æ‰¾å‡ºæ‰€æœ‰æ»¡è¶³ <code>nums1[j]</code> å°äº <code>nums1[i]</code> çš„ä¸‹æ ‡ <code>j</code> ã€‚</li>
    <li>ä»è¿™äº›ä¸‹æ ‡å¯¹åº”çš„ <code>nums2[j]</code> ä¸­é€‰å‡º <strong>è‡³å¤š</strong> <code>k</code> ä¸ªï¼Œå¹¶ <strong>æœ€å¤§åŒ–</strong> è¿™äº›å€¼çš„æ€»å’Œä½œä¸ºç»“æœã€‚</li>
</ul>

<p>è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º <code>n</code> çš„æ•°ç»„ <code>answer</code> ï¼Œå…¶ä¸­ <code>answer[i]</code> è¡¨ç¤ºå¯¹åº”ä¸‹æ ‡ <code>i</code> çš„ç»“æœã€‚</p>

<p>&nbsp;</p>

<p><strong class="example">ç¤ºä¾‹ 1ï¼š</strong></p>

<div class="example-block">
<p><strong>è¾“å…¥ï¼š</strong><span class="example-io">nums1 = [4,2,1,5,3], nums2 = [10,20,30,40,50], k = 2</span></p>

<p><strong>è¾“å‡ºï¼š</strong><span class="example-io">[80,30,0,80,50]</span></p>

<p><strong>è§£é‡Šï¼š</strong></p>

<ul>
    <li>å¯¹äº <code>i = 0</code> ï¼šæ»¡è¶³ <code>nums1[j] &lt; nums1[0]</code> çš„ä¸‹æ ‡ä¸º <code>[1, 2, 4]</code> ï¼Œé€‰å‡ºå…¶ä¸­å€¼æœ€å¤§çš„ä¸¤ä¸ªï¼Œç»“æœä¸º <code>50 + 30 = 80</code> ã€‚</li>
    <li>å¯¹äº <code>i = 1</code> ï¼šæ»¡è¶³ <code>nums1[j] &lt; nums1[1]</code> çš„ä¸‹æ ‡ä¸º <code>[2]</code> ï¼Œåªèƒ½é€‰æ‹©è¿™ä¸ªå€¼ï¼Œç»“æœä¸º <code>30</code> ã€‚</li>
    <li>å¯¹äº <code>i = 2</code> ï¼šä¸å­˜åœ¨æ»¡è¶³ <code>nums1[j] &lt; nums1[2]</code> çš„ä¸‹æ ‡ï¼Œç»“æœä¸º <code>0</code> ã€‚</li>
    <li>å¯¹äº <code>i = 3</code> ï¼šæ»¡è¶³ <code>nums1[j] &lt; nums1[3]</code> çš„ä¸‹æ ‡ä¸º <code>[0, 1, 2, 4]</code> ï¼Œé€‰å‡ºå…¶ä¸­å€¼æœ€å¤§çš„ä¸¤ä¸ªï¼Œç»“æœä¸º <code>50 + 30 = 80</code> ã€‚</li>
    <li>å¯¹äº <code>i = 4</code> ï¼šæ»¡è¶³ <code>nums1[j] &lt; nums1[4]</code> çš„ä¸‹æ ‡ä¸º <code>[1, 2]</code> ï¼Œé€‰å‡ºå…¶ä¸­å€¼æœ€å¤§çš„ä¸¤ä¸ªï¼Œç»“æœä¸º <code>30 + 20 = 50</code> ã€‚</li>
</ul>
</div>

<p><strong class="example">ç¤ºä¾‹ 2ï¼š</strong></p>

<div class="example-block">
<p><strong>è¾“å…¥ï¼š</strong><span class="example-io">nums1 = [2,2,2,2], nums2 = [3,1,2,3], k = 1</span></p>

<p><strong>è¾“å‡ºï¼š</strong><span class="example-io">[0,0,0,0]</span></p>

<p><strong>è§£é‡Šï¼š</strong>ç”±äº <code>nums1</code> ä¸­çš„æ‰€æœ‰å…ƒç´ ç›¸ç­‰ï¼Œä¸å­˜åœ¨æ»¡è¶³æ¡ä»¶ <code>nums1[j] &lt; nums1[i]</code>ï¼Œæ‰€æœ‰ä½ç½®çš„ç»“æœéƒ½æ˜¯ 0 ã€‚</p>
</div>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
    <li><code>n == nums1.length == nums2.length</code></li>
    <li><code>1 &lt;= n &lt;= 10<sup>5</sup></code></li>
    <li><code>1 &lt;= nums1[i], nums2[i] &lt;= 10<sup>6</sup></code></li>
    <li><code>1 &lt;= k &lt;= n</code></li>
</ul>

<hr />

<h2 id="ä»£ç æ¨¡æ¿">ä»£ç æ¨¡æ¿</h2>

<h3 id="c">C++</h3>

<pre><code>class Solution {
public:
    vector&lt;long long&gt; findMaxSum(vector&lt;int&gt;&amp; nums1, vector&lt;int&gt;&amp; nums2, int k) {

    }
};
</code></pre>

<h3 id="java">Java</h3>

<pre><code>class Solution {
    public long[] findMaxSum(int[] nums1, int[] nums2, int k) {

    }
}
</code></pre>

<h3 id="python3">Python3</h3>

<pre><code>class Solution:
    def findMaxSum(self, nums1: List[int], nums2: List[int], k: int) -&gt; List[int]:

</code></pre>

<h3 id="javascript">JavaScript</h3>

<pre><code>/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @param {number} k
 * @return {number[]}
 */
var findMaxSum = function(nums1, nums2, k) {

};
</code></pre>

<h3 id="go">Go</h3>

<pre><code>func findMaxSum(nums1 []int, nums2 []int, k int) []int64 {

}
</code></pre>

<hr />

<h2 id="æç¤º">æç¤º</h2>

<ol>
<li>Sort <code>nums1</code> and its corresponding <code>nums2</code> values together based on <code>nums1</code>.</li>
<li>Use a max heap to track the top <code>k</code> values of <code>nums2</code> as you process each element in the sorted order.</li>
</ol>

<hr />

<h2 id="ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹">ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹</h2>

<pre><code>[4,2,1,5,3]
[10,20,30,40,50]
2
</code></pre>

<hr />

<h2 id="ai-è§£ç­”-deepseek">AI è§£ç­” (DeepSeek)</h2>

<h2 id="é¢˜ç›®åˆ†æ">é¢˜ç›®åˆ†æ</h2>

<p>æˆ‘ä»¬éœ€è¦å¯¹æ¯ä¸ªä¸‹æ ‡ <code>i</code>ï¼Œæ‰¾å‡ºæ‰€æœ‰æ»¡è¶³ <code>nums1[j] &lt; nums1[i]</code> çš„ <code>j</code>ï¼Œç„¶åä»å¯¹åº”çš„ <code>nums2[j]</code> ä¸­é€‰å‡ºè‡³å¤š <code>k</code> ä¸ªæœ€å¤§çš„å€¼ï¼Œæ±‚å’Œä½œä¸º <code>answer[i]</code>ã€‚</p>

<p><strong>å…³é”®ç‚¹</strong>ï¼š
1. å¯¹äºæ¯ä¸ª <code>i</code>ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘æ‰€æœ‰ <code>nums1[j] &lt; nums1[i]</code> çš„ <code>j</code>
2. ä»è¿™äº› <code>j</code> å¯¹åº”çš„ <code>nums2[j]</code> ä¸­é€‰å‡ºè‡³å¤š <code>k</code> ä¸ªæœ€å¤§çš„å€¼æ±‚å’Œ
3. <code>n</code> æœ€å¤§ä¸º <code>10^5</code>ï¼Œéœ€è¦é«˜æ•ˆç®—æ³•</p>

<h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2>

<h3 id="æ ¸å¿ƒæ€è·¯">æ ¸å¿ƒæ€è·¯</h3>

<ol>
<li><strong>æ’åº + æ•°æ®ç»“æ„ç»´æŠ¤</strong>ï¼šå°†å…ƒç´ æŒ‰ <code>nums1</code> æ’åºï¼Œä»å°åˆ°å¤§å¤„ç†ï¼Œè¿™æ ·åœ¨å¤„ç†åˆ°ç¬¬ <code>i</code> ä¸ªå…ƒç´ æ—¶ï¼Œæ‰€æœ‰ <code>nums1</code> å€¼å°äºå®ƒçš„å…ƒç´ éƒ½å·²ç»è¢«å¤„ç†è¿‡</li>
<li><strong>ç»´æŠ¤å‰ k å¤§å…ƒç´ çš„å’Œ</strong>ï¼šä½¿ç”¨æœ€å°å †ç»´æŠ¤å½“å‰å·²å¤„ç†å…ƒç´ ä¸­ <code>nums2</code> å€¼æœ€å¤§çš„ <code>k</code> ä¸ªå…ƒç´ </li>
<li><strong>äºŒåˆ†æŸ¥æ‰¾ + æ•°æ®ç»“æ„</strong>ï¼šç¦»çº¿å¤„ç†ï¼Œå¯¹æ¯ä¸ªæŸ¥è¯¢æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å…ƒç´ èŒƒå›´</li>
</ol>

<hr />

<h2 id="è§£æ³•ä¸€æ’åº-æœ€å°å †">è§£æ³•ä¸€ï¼šæ’åº + æœ€å°å †</h2>

<h3 id="æ€è·¯">æ€è·¯</h3>

<ol>
<li>å°†ä¸‹æ ‡æŒ‰ <code>nums1</code> å€¼æ’åº</li>
<li>ä»å°åˆ°å¤§éå†æ’åºåçš„ä¸‹æ ‡ï¼Œç»´æŠ¤ä¸€ä¸ªæœ€å°å †å­˜å‚¨å½“å‰å·²å¤„ç†å…ƒç´ çš„ <code>nums2</code> å€¼</li>
<li>å †çš„å¤§å°ä¸è¶…è¿‡ <code>k</code>ï¼Œå †é¡¶æ˜¯æœ€å°çš„å…ƒç´ </li>
<li>å½“å †å¤§å°è¶…è¿‡ <code>k</code> æ—¶ï¼Œå¼¹å‡ºå †é¡¶ï¼ˆæœ€å°çš„å…ƒç´ ï¼‰</li>
<li>å¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œç­”æ¡ˆå°±æ˜¯å½“å‰å †ä¸­æ‰€æœ‰å…ƒç´ çš„å’Œ</li>
</ol>

<h3 id="å¤æ‚åº¦åˆ†æ">å¤æ‚åº¦åˆ†æ</h3>

<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(n log n + n log k)ï¼Œæ’åº O(n log n)ï¼Œå †æ“ä½œ O(n log k)</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(n + k)ï¼Œå­˜å‚¨æ’åºç»“æœå’Œå †</li>
</ul>

<h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3>

<h4 id="go-å®ç°">Go å®ç°</h4>

<pre><code>func maxSum(nums1, nums2 []int, k int) []int64 {
    n := len(nums1)

    // åˆ›å»ºç´¢å¼•æ•°ç»„å¹¶æŒ‰ nums1 æ’åº
    indices := make([]int, n)
    for i := range indices {
        indices[i] = i
    }
    sort.Slice(indices, func(i, j int) bool {
        return nums1[indices[i]] &lt; nums1[indices[j]]
    })

    answer := make([]int64, n)
    minHeap := &amp;IntHeap{}
    heap.Init(minHeap)
    sum := int64(0)

    // æŒ‰ nums1 å€¼ä»å°åˆ°å¤§å¤„ç†
    for i := 0; i &lt; n; i++ {
        idx := indices[i]

        // å¯¹äºå½“å‰å…ƒç´ ï¼Œæ‰€æœ‰ nums1 å€¼å°äºå®ƒçš„å…ƒç´ éƒ½åœ¨å †ä¸­
        answer[idx] = sum

        // å°†å½“å‰å…ƒç´ çš„ nums2 å€¼åŠ å…¥å †
        heap.Push(minHeap, nums2[idx])
        sum += int64(nums2[idx])

        // å¦‚æœå †å¤§å°è¶…è¿‡ kï¼Œç§»é™¤æœ€å°çš„å…ƒç´ 
        if minHeap.Len() &gt; k {
            smallest := heap.Pop(minHeap).(int)
            sum -= int64(smallest)
        }
    }

    return answer
}

// æœ€å°å †å®ç°
type IntHeap []int

func (h IntHeap) Len() int           { return len(h) }
func (h IntHeap) Less(i, j int) bool { return h[i] &lt; h[j] }
func (h IntHeap) Swap(i, j int)      { h[i], h[j] = h[j], h[i] }

func (h *IntHeap) Push(x interface{}) {
    *h = append(*h, x.(int))
}

func (h *IntHeap) Pop() interface{} {
    old := *h
    n := len(old)
    x := old[n-1]
    *h = old[:n-1]
    return x
}
</code></pre>

<h4 id="c-å®ç°">C++ å®ç°</h4>

<pre><code>class Solution {
public:
    vector&lt;long long&gt; maxSum(vector&lt;int&gt;&amp; nums1, vector&lt;int&gt;&amp; nums2, int k) {
        int n = nums1.size();

        // åˆ›å»ºç´¢å¼•æ•°ç»„å¹¶æŒ‰ nums1 æ’åº
        vector&lt;int&gt; indices(n);
        iota(indices.begin(), indices.end(), 0);
        sort(indices.begin(), indices.end(), [&amp;](int i, int j) {
            return nums1[i] &lt; nums1[j];
        });

        vector&lt;long long&gt; answer(n, 0);
        priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt;&gt; minHeap; // æœ€å°å †
        long long sum = 0;

        // æŒ‰ nums1 å€¼ä»å°åˆ°å¤§å¤„ç†
        for (int i = 0; i &lt; n; i++) {
            int idx = indices[i];

            // å¯¹äºå½“å‰å…ƒç´ ï¼Œæ‰€æœ‰ nums1 å€¼å°äºå®ƒçš„å…ƒç´ éƒ½åœ¨å †ä¸­
            answer[idx] = sum;

            // å°†å½“å‰å…ƒç´ çš„ nums2 å€¼åŠ å…¥å †
            minHeap.push(nums2[idx]);
            sum += nums2[idx];

            // å¦‚æœå †å¤§å°è¶…è¿‡ kï¼Œç§»é™¤æœ€å°çš„å…ƒç´ 
            if (minHeap.size() &gt; k) {
                sum -= minHeap.top();
                minHeap.pop();
            }
        }

        return answer;
    }
};
</code></pre>

<hr />

<h2 id="è§£æ³•äºŒç¦»æ•£åŒ–-æ ‘çŠ¶æ•°ç»„çº¿æ®µæ ‘">è§£æ³•äºŒï¼šç¦»æ•£åŒ– + æ ‘çŠ¶æ•°ç»„/çº¿æ®µæ ‘</h2>

<h3 id="æ€è·¯-2">æ€è·¯</h3>

<ol>
<li>å¯¹ <code>nums1</code> çš„å€¼è¿›è¡Œç¦»æ•£åŒ–</li>
<li>ä½¿ç”¨æ ‘çŠ¶æ•°ç»„æˆ–çº¿æ®µæ ‘ç»´æŠ¤æ¯ä¸ªç¦»æ•£åŒ–å€¼å¯¹åº”çš„å‰ k å¤§å…ƒç´ çš„å’Œ</li>
<li>å¯¹äºæ¯ä¸ªå…ƒç´ ï¼ŒæŸ¥è¯¢æ‰€æœ‰å°äºå½“å‰ <code>nums1</code> å€¼çš„å…ƒç´ çš„å‰ k å¤§å’Œ</li>
</ol>

<h3 id="å¤æ‚åº¦åˆ†æ-2">å¤æ‚åº¦åˆ†æ</h3>

<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(n log n + n log n log k)ï¼Œéœ€è¦å¤„ç†æ¯ä¸ªå…ƒç´ </li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(n + n log k)ï¼Œå­˜å‚¨ç¦»æ•£åŒ–ç»“æœå’Œæ•°æ®ç»“æ„</li>
</ul>

<h3 id="ä»£ç å®ç°-2">ä»£ç å®ç°</h3>

<h4 id="go-å®ç°-2">Go å®ç°</h4>

<pre><code>func maxSum(nums1, nums2 []int, k int) []int64 {
    n := len(nums1)

    // ç¦»æ•£åŒ– nums1
    sortedVals := make([]int, n)
    copy(sortedVals, nums1)
    sort.Ints(sortedVals)

    // å»é‡
    uniqueVals := make([]int, 0, n)
    for i := 0; i &lt; n; i++ {
        if i == 0 || sortedVals[i] != sortedVals[i-1] {
            uniqueVals = append(uniqueVals, sortedVals[i])
        }
    }

    // åˆ›å»ºæ˜ å°„
    valToIdx := make(map[int]int)
    for i, val := range uniqueVals {
        valToIdx[val] = i + 1 // æ ‘çŠ¶æ•°ç»„ä»1å¼€å§‹
    }

    // æŒ‰ nums1 å€¼æ’åºç´¢å¼•
    indices := make([]int, n)
    for i := range indices {
        indices[i] = i
    }
    sort.Slice(indices, func(i, j int) bool {
        return nums1[indices[i]] &lt; nums1[indices[j]]
    })

    answer := make([]int64, n)

    // æ ‘çŠ¶æ•°ç»„ï¼Œæ¯ä¸ªä½ç½®ç»´æŠ¤ä¸€ä¸ªæœ€å°å †
    fenwick := make([]*IntHeap, len(uniqueVals)+2)
    for i := range fenwick {
        fenwick[i] = &amp;IntHeap{}
        heap.Init(fenwick[i])
    }

    // è¾…åŠ©å‡½æ•°ï¼šæ›´æ–°æ ‘çŠ¶æ•°ç»„
    update := func(idx int, val int) {
        for i := idx; i &lt; len(fenwick); i += i &amp; -i {
            heap.Push(fenwick[i], val)
            if fenwick[i].Len() &gt; k {
                heap.Pop(fenwick[i])
            }
        }
    }

    // è¾…åŠ©å‡½æ•°ï¼šæŸ¥è¯¢å‰ç¼€
    query := func(idx int) int64 {
        result := int64(0)
        // æ”¶é›†æ‰€æœ‰ç›¸å…³å †ä¸­çš„å…ƒç´ 
        allVals := &amp;IntHeap{}
        heap.Init(allVals)

        for i := idx; i &gt; 0; i -= i &amp; -i {
            // åˆå¹¶å †
            temp := make([]int, fenwick[i].Len())
            copy(temp, *fenwick[i])
            for _, val := range temp {
                heap.Push(allVals, val)
                if allVals.Len() &gt; k {
                    heap.Pop(allVals)
                }
            }
        }

        // è®¡ç®—å’Œ
        for _, val := range *allVals {
            result += int64(val)
        }
        return result
    }

    // å¤„ç†æ¯ä¸ªå…ƒç´ 
    for i := 0; i &lt; n; i++ {
        idx := indices[i]
        pos := valToIdx[nums1[idx]]

        // æŸ¥è¯¢æ‰€æœ‰å°äºå½“å‰å€¼çš„å…ƒç´ 
        answer[idx] = query(pos - 1)

        // æ›´æ–°å½“å‰å€¼
        update(pos, nums2[idx])
    }

    return answer
}
</code></pre>

<h4 id="c-å®ç°-2">C++ å®ç°</h4>

<pre><code>class Solution {
public:
    vector&lt;long long&gt; maxSum(vector&lt;int&gt;&amp; nums1, vector&lt;int&gt;&amp; nums2, int k) {
        int n = nums1.size();

        // ç¦»æ•£åŒ– nums1
        vector&lt;int&gt; sortedVals = nums1;
        sort(sortedVals.begin(), sortedVals.end());
        sortedVals.erase(unique(sortedVals.begin(), sortedVals.end()), sortedVals.end());

        // åˆ›å»ºæ˜ å°„
        unordered_map&lt;int, int&gt; valToIdx;
        for (int i = 0; i &lt; sortedVals.size(); i++) {
            valToIdx[sortedVals[i]] = i + 1; // ä»1å¼€å§‹
        }

        // æŒ‰ nums1 å€¼æ’åºç´¢å¼•
        vector&lt;int&gt; indices(n);
        iota(indices.begin(), indices.end(), 0);
        sort(indices.begin(), indices.end(), [&amp;](int i, int j) {
            return nums1[i] &lt; nums1[j];
        });

        vector&lt;long long&gt; answer(n, 0);
        int m = sortedVals.size();

        // æ ‘çŠ¶æ•°ç»„ï¼Œæ¯ä¸ªä½ç½®ç»´æŠ¤ä¸€ä¸ªæœ€å°å †
        vector&lt;priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt;&gt;&gt; fenwick(m + 2);

        // æ›´æ–°æ ‘çŠ¶æ•°ç»„
        auto update = [&amp;](int idx, int val) {
            for (int i = idx; i &lt;= m + 1; i += i &amp; -i) {
                fenwick[i].push(val);
                if (fenwick[i].size() &gt; k) {
                    fenwick[i].pop();
                }
            }
        };

        // æŸ¥è¯¢å‰ç¼€
        auto query = [&amp;](int idx) -&gt; long long {
            priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt;&gt; allVals;

            for (int i = idx; i &gt; 0; i -= i &amp; -i) {
                // åˆå¹¶å †
                auto temp = fenwick[i];
                while (!temp.empty()) {
                    allVals.push(temp.top());
                    temp.pop();
                    if (allVals.size() &gt; k) {
                        allVals.pop();
                    }
                }
            }

            // è®¡ç®—å’Œ
            long long result = 0;
            while (!allVals.empty()) {
                result += allVals.top();
                allVals.pop();
            }
            return result;
        };

        // å¤„ç†æ¯ä¸ªå…ƒç´ 
        for (int i = 0; i &lt; n; i++) {
            int idx = indices[i];
            int pos = valToIdx[nums1[idx]];

            // æŸ¥è¯¢æ‰€æœ‰å°äºå½“å‰å€¼çš„å…ƒç´ 
            answer[idx] = query(pos - 1);

            // æ›´æ–°å½“å‰å€¼
            update(pos, nums2[idx]);
        }

        return answer;
    }
};
</code></pre>

<hr />

<h2 id="è§£æ³•ä¸‰ç¦»çº¿æŸ¥è¯¢-å¹³è¡¡æ ‘">è§£æ³•ä¸‰ï¼šç¦»çº¿æŸ¥è¯¢ + å¹³è¡¡æ ‘</h2>

<h3 id="æ€è·¯-3">æ€è·¯</h3>

<ol>
<li>å°†æ‰€æœ‰æŸ¥è¯¢ç¦»çº¿å¤„ç†</li>
<li>ä½¿ç”¨å¹³è¡¡æ ‘ï¼ˆå¦‚çº¢é»‘æ ‘ï¼‰ç»´æŠ¤å½“å‰å·²å¤„ç†å…ƒç´ </li>
<li>å¹³è¡¡æ ‘ä¿æŒæœ€å¤š k ä¸ªæœ€å¤§å…ƒç´ </li>
<li>æŒ‰ <code>nums1</code> å€¼æ’åºåé¡ºåºå¤„ç†</li>
</ol>

<h3 id="å¤æ‚åº¦åˆ†æ-3">å¤æ‚åº¦åˆ†æ</h3>

<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(n log n + n log k)</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(n + k)</li>
</ul>

<h3 id="ä»£ç å®ç°-3">ä»£ç å®ç°</h3>

<h4 id="go-å®ç°-3">Go å®ç°</h4>

<pre><code>func maxSum(nums1, nums2 []int, k int) []int64 {
    n := len(nums1)

    // åˆ›å»ºç´¢å¼•æ•°ç»„å¹¶æŒ‰ nums1 æ’åº
    indices := make([]int, n)
    for i := range indices {
        indices[i] = i
    }
    sort.Slice(indices, func(i, j int) bool {
        return nums1[indices[i]] &lt; nums1[indices[j]]
    })

    answer := make([]int64, n)

    // ä½¿ç”¨ slice æ¨¡æ‹Ÿå¹³è¡¡æ ‘ï¼ˆæ’åºï¼‰
    sortedVals := make([]int, 0, k)
    sum := int64(0)

    // æŒ‰ nums1 å€¼ä»å°åˆ°å¤§å¤„ç†
    for i := 0; i &lt; n; i++ {
        idx := indices[i]

        // å¯¹äºå½“å‰å…ƒç´ ï¼Œæ‰€æœ‰ nums1 å€¼å°äºå®ƒçš„å…ƒç´ éƒ½åœ¨ sortedVals ä¸­
        answer[idx] = sum

        // æ’å…¥å½“å‰å€¼åˆ°æœ‰åºåˆ—è¡¨
        val := nums2[idx]
        pos := sort.SearchInts(sortedVals, val)

        // åœ¨æ­£ç¡®ä½ç½®æ’å…¥
        if len(sortedVals) &lt; k {
            sortedVals = append(sortedVals, 0)
            copy(sortedVals[pos+1:], sortedVals[pos:])
            sortedVals[pos] = val
            sum += int64(val)
        } else if pos &gt; 0 {
            // æ›¿æ¢æœ€å°çš„å…ƒç´ 
            sum -= int64(sortedVals[0])
            copy(sortedVals[:pos-1], sortedVals[1:pos])
            sortedVals[pos-1] = val
            sum += int64(val)
        }

        // å¦‚æœè¶…è¿‡ k ä¸ªå…ƒç´ ï¼Œç§»é™¤æœ€å°çš„
        if len(sortedVals) &gt; k {
            sum -= int64(sortedVals[0])
            sortedVals = sortedVals[1:]
        }
    }

    return answer
}
</code></pre>

<h4 id="c-å®ç°-3">C++ å®ç°</h4>

<pre><code>class Solution {
public:
    vector&lt;long long&gt; maxSum(vector&lt;int&gt;&amp; nums1, vector&lt;int&gt;&amp; nums2, int k) {
        int n = nums1.size();

        // åˆ›å»ºç´¢å¼•æ•°ç»„å¹¶æŒ‰ nums1 æ’åº
        vector&lt;int&gt; indices(n);
        iota(indices.begin(), indices.end(), 0);
        sort(indices.begin(), indices.end(), [&amp;](int i, int j) {
            return nums1[i] &lt; nums1[j];
        });

        vector&lt;long long&gt; answer(n, 0);
        multiset&lt;int&gt; topK; // å­˜å‚¨æœ€å¤§çš„ k ä¸ªå…ƒç´ 
        long long sum = 0;

        // æŒ‰ nums1 å€¼ä»å°åˆ°å¤§å¤„ç†
        for (int i = 0; i &lt; n; i++) {
            int idx = indices[i];

            // å¯¹äºå½“å‰å…ƒç´ ï¼Œæ‰€æœ‰ nums1 å€¼å°äºå®ƒçš„å…ƒç´ éƒ½åœ¨ topK ä¸­
            answer[idx] = sum;

            // æ’å…¥å½“å‰å€¼
            int val = nums2[idx];
            topK.insert(val);
            sum += val;

            // å¦‚æœè¶…è¿‡ k ä¸ªå…ƒç´ ï¼Œç§»é™¤æœ€å°çš„
            if (topK.size() &gt; k) {
                sum -= *topK.begin();
                topK.erase(topK.begin());
            }
        }

        return answer;
    }
};
</code></pre>

<hr />

<h2 id="è§£æ³•å¯¹æ¯”">è§£æ³•å¯¹æ¯”</h2>

<table>
<thead>
<tr>
  <th>ç‰¹æ€§</th>
  <th>è§£æ³•ä¸€ï¼ˆæ’åº+æœ€å°å †ï¼‰</th>
  <th>è§£æ³•äºŒï¼ˆç¦»æ•£åŒ–+æ ‘çŠ¶æ•°ç»„ï¼‰</th>
  <th>è§£æ³•ä¸‰ï¼ˆç¦»çº¿æŸ¥è¯¢+å¹³è¡¡æ ‘ï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
  <td>æ—¶é—´å¤æ‚åº¦</td>
  <td>O(n log n + n log k)</td>
  <td>O(n log n + n log n log k)</td>
  <td>O(n log n + n log k)</td>
</tr>
<tr>
  <td>ç©ºé—´å¤æ‚åº¦</td>
  <td>O(n + k)</td>
  <td>O(n + n log k)</td>
  <td>O(n + k)</td>
</tr>
<tr>
  <td>å®ç°éš¾åº¦</td>
  <td>ç®€å•</td>
  <td>å¤æ‚</td>
  <td>ä¸­ç­‰</td>
</tr>
<tr>
  <td>é€‚ç”¨åœºæ™¯</td>
  <td>é€šç”¨ï¼Œæ¨è</td>
  <td>éœ€è¦é¢‘ç¹æŸ¥è¯¢åŒºé—´</td>
  <td>éœ€è¦åŠ¨æ€ç»´æŠ¤æœ‰åºé›†åˆ</td>
</tr>
<tr>
  <td>ä»£ç ç®€æ´æ€§</td>
  <td>é«˜</td>
  <td>ä½</td>
  <td>ä¸­</td>
</tr>
</tbody>
</table>

<h2 id="æ¨èè§£æ³•">æ¨èè§£æ³•</h2>

<p><strong>è§£æ³•ä¸€ï¼ˆæ’åº+æœ€å°å †ï¼‰æ˜¯æœ€æ¨èçš„</strong>ï¼Œå› ä¸ºï¼š
1. æ—¶é—´å¤æ‚åº¦æœ€ä¼˜
2. å®ç°ç®€å•ç›´è§‚
3. ç©ºé—´å¤æ‚åº¦ä½
4. ä»£ç æ˜“äºç†è§£å’Œç»´æŠ¤</p>

<p>å¯¹äºæœ¬é¢˜ï¼Œç”±äºæˆ‘ä»¬åªéœ€è¦æŒ‰é¡ºåºå¤„ç†ï¼Œä¸éœ€è¦éšæœºæŸ¥è¯¢ï¼Œè§£æ³•ä¸€å®Œå…¨æ»¡è¶³éœ€æ±‚ä¸”æ•ˆç‡æœ€é«˜ã€‚</p>

<hr />

<p><em>è·å–æ—¶é—´: 2026-02-27 10:33:54</em></p>

                </div>
            </div>

            <div class="footer">
                <p>ç”± <a href="https://github.com/LFrankl/leetcode" target="_blank">LeetCode Daily Script</a> è‡ªåŠ¨ç”Ÿæˆ</p>
                <p>AI è§£ç­”ç”± <a href="https://www.deepseek.com/" target="_blank">DeepSeek</a> æä¾›</p>
            </div>
        </div>
    </div>

    <!-- æµ®åŠ¨è¿”å›æŒ‰é’® -->
    <button class="fab-back" onclick="history.back()" aria-label="è¿”å›é¢˜ç›®åˆ—è¡¨">
        â†‘
    </button>
</body>
</html>