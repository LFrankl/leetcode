<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1806. è¿˜åŸæ’åˆ—çš„æœ€å°‘æ“ä½œæ­¥æ•° - LeetCode</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <div class="top-bar">
        <button class="menu-button" onclick="history.back()" aria-label="è¿”å›">
            <div class="menu-icon">
                <span style="transform: rotate(-45deg) translateY(-2px);"></span>
                <span style="transform: rotate(45deg) translateY(2px);"></span>
            </div>
        </button>
        <div class="logo">
            <span class="logo-emoji">ğŸ“š</span>
            LeetCode æ¯æ—¥é¢˜ç›®
        </div>
        <div class="update-time">2026-02-26 01:00:00</div>
    </div>

    <!-- ä¸»å†…å®¹åŒº -->
    <div class="main-content" style="margin-left: 0;">
        <div class="content-wrapper">
            <button class="back-button" onclick="history.back()">
                â† è¿”å›é¢˜ç›®åˆ—è¡¨
            </button>

            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">1806. è¿˜åŸæ’åˆ—çš„æœ€å°‘æ“ä½œæ­¥æ•°</span>
                    <span class="difficulty-badge difficulty-medium">
                        ä¸­ç­‰
                    </span>
                    <a href="https://leetcode.cn/problems/minimum-number-of-operations-to-reinitialize-a-permutation/" target="_blank" class="question-link">åœ¨ LeetCode æ‰“å¼€</a>
                </div>
                <div class="markdown-content">
                    <h1 id="1806-è¿˜åŸæ’åˆ—çš„æœ€å°‘æ“ä½œæ­¥æ•°">1806. è¿˜åŸæ’åˆ—çš„æœ€å°‘æ“ä½œæ­¥æ•°</h1>

<p><strong>éš¾åº¦</strong>: Medium</p>

<p><strong>æ ‡ç­¾</strong>: æ•°ç»„, æ•°å­¦, æ¨¡æ‹Ÿ</p>

<p><strong>é“¾æ¥</strong>: https://leetcode.cn/problems/minimum-number-of-operations-to-reinitialize-a-permutation/</p>

<hr />

<h2 id="é¢˜ç›®æè¿°">é¢˜ç›®æè¿°</h2>

<p>ç»™ä½ ä¸€ä¸ªå¶æ•° <code>n</code>â€‹â€‹â€‹â€‹â€‹â€‹ ï¼Œå·²çŸ¥å­˜åœ¨ä¸€ä¸ªé•¿åº¦ä¸º <code>n</code> çš„æ’åˆ— <code>perm</code> ï¼Œå…¶ä¸­ <code>perm[i] == i</code>â€‹ï¼ˆä¸‹æ ‡ <strong>ä» 0 å¼€å§‹</strong> è®¡æ•°ï¼‰ã€‚</p>

<p>ä¸€æ­¥æ“ä½œä¸­ï¼Œä½ å°†åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ <code>arr</code> ï¼Œå¯¹äºæ¯ä¸ª <code>i</code> ï¼š</p>

<ul>
    <li>å¦‚æœ <code>i % 2 == 0</code> ï¼Œé‚£ä¹ˆ <code>arr[i] = perm[i / 2]</code></li>
    <li>å¦‚æœ <code>i % 2 == 1</code> ï¼Œé‚£ä¹ˆ <code>arr[i] = perm[n / 2 + (i - 1) / 2]</code></li>
</ul>

<p>ç„¶åå°† <code>arr</code>â€‹â€‹ èµ‹å€¼â€‹â€‹ç»™ <code>perm</code> ã€‚</p>

<p>è¦æƒ³ä½¿ <code>perm</code> å›åˆ°æ’åˆ—åˆå§‹å€¼ï¼Œè‡³å°‘éœ€è¦æ‰§è¡Œå¤šå°‘æ­¥æ“ä½œï¼Ÿè¿”å›æœ€å°çš„ <strong>éé›¶</strong> æ“ä½œæ­¥æ•°ã€‚</p>

<p>Â </p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>n = 2
<strong>è¾“å‡ºï¼š</strong>1
<strong>è§£é‡Šï¼š</strong>æœ€åˆï¼Œperm = [0,1]
ç¬¬ 1Â æ­¥æ“ä½œåï¼Œperm = [0,1]
æ‰€ä»¥ï¼Œä»…éœ€æ‰§è¡Œ 1 æ­¥æ“ä½œ</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>n = 4
<strong>è¾“å‡ºï¼š</strong>2
<strong>è§£é‡Šï¼š</strong>æœ€åˆï¼Œperm = [0,1,2,3]
ç¬¬ 1Â æ­¥æ“ä½œåï¼Œperm = [0,2,1,3]
ç¬¬ 2Â æ­¥æ“ä½œåï¼Œperm = [0,1,2,3]
æ‰€ä»¥ï¼Œä»…éœ€æ‰§è¡Œ 2 æ­¥æ“ä½œ</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>n = 6
<strong>è¾“å‡ºï¼š</strong>4
</pre>

<p>Â </p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
    <li><code>2 <= n <= 1000</code></li>
    <li><code>n</code>â€‹â€‹â€‹â€‹â€‹â€‹ æ˜¯ä¸€ä¸ªå¶æ•°</li>
</ul>

<hr />

<h2 id="ä»£ç æ¨¡æ¿">ä»£ç æ¨¡æ¿</h2>

<h3 id="c">C++</h3>

<pre><code>class Solution {
public:
    int reinitializePermutation(int n) {

    }
};
</code></pre>

<h3 id="java">Java</h3>

<pre><code>class Solution {
    public int reinitializePermutation(int n) {

    }
}
</code></pre>

<h3 id="python3">Python3</h3>

<pre><code>class Solution:
    def reinitializePermutation(self, n: int) -&gt; int:

</code></pre>

<h3 id="javascript">JavaScript</h3>

<pre><code>/**
 * @param {number} n
 * @return {number}
 */
var reinitializePermutation = function(n) {

};
</code></pre>

<h3 id="go">Go</h3>

<pre><code>func reinitializePermutation(n int) int {

}
</code></pre>

<hr />

<h2 id="æç¤º">æç¤º</h2>

<ol>
<li>It is safe to assume the number of  operations isn't more than n</li>
<li>The number is small enough to apply a brute force solution.</li>
</ol>

<hr />

<h2 id="ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹">ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹</h2>

<pre><code>2
</code></pre>

<hr />

<h2 id="ai-è§£ç­”-deepseek">AI è§£ç­” (DeepSeek)</h2>

<h2 id="é¢˜ç›®åˆ†æ">é¢˜ç›®åˆ†æ</h2>

<p>é¢˜ç›®æè¿°äº†ä¸€ä¸ªç‰¹å®šçš„å˜æ¢è§„åˆ™ï¼š
- åˆå§‹æ’åˆ—ï¼š<code>perm = [0, 1, 2, ..., n-1]</code>
- æ¯æ¬¡æ“ä½œæ ¹æ®è§„åˆ™ç”Ÿæˆæ–°æ•°ç»„ <code>arr</code>ï¼š
  - å¦‚æœ <code>i</code> æ˜¯å¶æ•°ï¼š<code>arr[i] = perm[i/2]</code>
  - å¦‚æœ <code>i</code> æ˜¯å¥‡æ•°ï¼š<code>arr[i] = perm[n/2 + (i-1)/2]</code>
- ç„¶åå°† <code>arr</code> èµ‹å€¼ç»™ <code>perm</code></p>

<p>æˆ‘ä»¬éœ€è¦æ‰¾åˆ°æœ€å°çš„æ­£æ•´æ•° <code>k</code>ï¼Œä½¿å¾—ç»è¿‡ <code>k</code> æ¬¡å˜æ¢åï¼Œ<code>perm</code> æ¢å¤åˆ°åˆå§‹çŠ¶æ€ã€‚</p>

<h2 id="å…³é”®è§‚å¯Ÿ">å…³é”®è§‚å¯Ÿ</h2>

<ol>
<li><p><strong>å˜æ¢è§„åˆ™çš„æœ¬è´¨</strong>ï¼š</p>

<ul>
<li>å¶æ•°ä½ç½® <code>i</code> çš„å…ƒç´ æ¥è‡ªåŸæ•°ç»„å‰åŠéƒ¨åˆ† <code>perm[i/2]</code></li>
<li>å¥‡æ•°ä½ç½® <code>i</code> çš„å…ƒç´ æ¥è‡ªåŸæ•°ç»„ååŠéƒ¨åˆ† <code>perm[n/2 + (i-1)/2]</code></li>
<li>è¿™å®é™…ä¸Šæ˜¯ä¸€ä¸ª<strong>æ´—ç‰Œæ“ä½œ</strong>ï¼šå°†æ•°ç»„åˆ†æˆå‰åä¸¤åŠï¼Œç„¶åäº¤é”™åˆå¹¶</li>
</ul></li>
<li><p><strong>æ•°å­¦è¡¨ç¤º</strong>ï¼š</p>

<ul>
<li>å¯¹äºä½ç½® <code>i</code>ï¼Œå˜æ¢åçš„æ–°ä½ç½® <code>j</code> æ»¡è¶³ï¼š
<ul>
<li>å¦‚æœ <code>i &lt; n/2</code>ï¼Œåˆ™ <code>j = 2*i</code></li>
<li>å¦‚æœ <code>i â‰¥ n/2</code>ï¼Œåˆ™ <code>j = 2*(i - n/2) + 1</code></li>
</ul></li>
<li>è¿™å¯ä»¥ç»Ÿä¸€è¡¨ç¤ºä¸ºï¼š<code>j = (2*i) % (n-1)</code>ï¼Œå¯¹äº <code>i âˆˆ [0, n-2]</code></li>
<li>æ³¨æ„ï¼šæœ€åä¸€ä¸ªå…ƒç´  <code>n-1</code> å§‹ç»ˆä¿æŒåœ¨ä½ç½® <code>n-1</code></li>
</ul></li>
<li><p><strong>é—®é¢˜è½¬åŒ–</strong>ï¼š</p>

<ul>
<li>æ¯ä¸ªå…ƒç´ çš„ä½ç½®å˜åŒ–å½¢æˆä¸€ä¸ªç½®æ¢ï¼ˆæ’åˆ—ï¼‰</li>
<li>æˆ‘ä»¬éœ€è¦æ‰¾åˆ°è¿™ä¸ªç½®æ¢çš„é˜¶ï¼ˆæ‰€æœ‰å¾ªç¯é•¿åº¦çš„æœ€å°å…¬å€æ•°ï¼‰</li>
<li>ç‰¹åˆ«åœ°ï¼Œå…ƒç´  <code>0</code> å’Œ <code>n-1</code> çš„ä½ç½®ä¸å˜ï¼Œæ‰€ä»¥åªéœ€è€ƒè™‘ <code>1</code> åˆ° <code>n-2</code> çš„å…ƒç´ </li>
</ul></li>
</ol>

<h2 id="è§£æ³•ä¸€æ¨¡æ‹Ÿå˜æ¢è¿‡ç¨‹">è§£æ³•ä¸€ï¼šæ¨¡æ‹Ÿå˜æ¢è¿‡ç¨‹</h2>

<h3 id="æ€è·¯">æ€è·¯</h3>

<p>ç›´æ¥æ¨¡æ‹Ÿå˜æ¢è¿‡ç¨‹ï¼Œç›´åˆ°æ•°ç»„æ¢å¤åˆ°åˆå§‹çŠ¶æ€ã€‚</p>

<h3 id="å¤æ‚åº¦åˆ†æ">å¤æ‚åº¦åˆ†æ</h3>

<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(n*k)ï¼Œå…¶ä¸­ k æ˜¯ç­”æ¡ˆ</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</li>
</ul>

<h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3>

<h4 id="go-2">Go</h4>

<pre><code>func reinitializePermutation(n int) int {
    perm := make([]int, n)
    for i := 0; i &lt; n; i++ {
        perm[i] = i
    }

    arr := make([]int, n)
    steps := 0

    for {
        // æ‰§è¡Œä¸€æ¬¡å˜æ¢
        for i := 0; i &lt; n; i++ {
            if i%2 == 0 {
                arr[i] = perm[i/2]
            } else {
                arr[i] = perm[n/2 + (i-1)/2]
            }
        }

        steps++

        // æ£€æŸ¥æ˜¯å¦æ¢å¤
        restored := true
        for i := 0; i &lt; n; i++ {
            if arr[i] != i {
                restored = false
                break
            }
        }

        if restored {
            return steps
        }

        // å‡†å¤‡ä¸‹ä¸€æ¬¡è¿­ä»£
        copy(perm, arr)
    }
}
</code></pre>

<h4 id="c-2">C++</h4>

<pre><code>class Solution {
public:
    int reinitializePermutation(int n) {
        vector&lt;int&gt; perm(n);
        for (int i = 0; i &lt; n; i++) {
            perm[i] = i;
        }

        vector&lt;int&gt; arr(n);
        int steps = 0;

        while (true) {
            // æ‰§è¡Œä¸€æ¬¡å˜æ¢
            for (int i = 0; i &lt; n; i++) {
                if (i % 2 == 0) {
                    arr[i] = perm[i / 2];
                } else {
                    arr[i] = perm[n / 2 + (i - 1) / 2];
                }
            }

            steps++;

            // æ£€æŸ¥æ˜¯å¦æ¢å¤
            bool restored = true;
            for (int i = 0; i &lt; n; i++) {
                if (arr[i] != i) {
                    restored = false;
                    break;
                }
            }

            if (restored) {
                return steps;
            }

            // å‡†å¤‡ä¸‹ä¸€æ¬¡è¿­ä»£
            perm = arr;
        }
    }
};
</code></pre>

<h2 id="è§£æ³•äºŒè·Ÿè¸ªå•ä¸ªå…ƒç´ ">è§£æ³•äºŒï¼šè·Ÿè¸ªå•ä¸ªå…ƒç´ </h2>

<h3 id="æ€è·¯-2">æ€è·¯</h3>

<p>ç”±äºå˜æ¢æ˜¯ç¡®å®šæ€§çš„ï¼Œæˆ‘ä»¬å¯ä»¥åªè·Ÿè¸ªä¸€ä¸ªå…ƒç´ ï¼ˆæ¯”å¦‚å…ƒç´  <code>1</code>ï¼‰çš„ä½ç½®å˜åŒ–ï¼Œç›´åˆ°å®ƒå›åˆ°åŸå§‹ä½ç½®ã€‚å› ä¸ºæ‰€æœ‰å…ƒç´ éƒ½åœ¨å„è‡ªçš„å¾ªç¯ä¸­ï¼Œæ•´ä¸ªæ’åˆ—æ¢å¤çš„æ­¥æ•°æ˜¯æ‰€æœ‰å¾ªç¯é•¿åº¦çš„æœ€å°å…¬å€æ•°ï¼Œä½†è·Ÿè¸ªå•ä¸ªå…ƒç´ å¯ä»¥å¾—åˆ°ç­”æ¡ˆã€‚</p>

<h3 id="å¤æ‚åº¦åˆ†æ-2">å¤æ‚åº¦åˆ†æ</h3>

<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(k)ï¼Œå…¶ä¸­ k æ˜¯ç­”æ¡ˆ</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li>
</ul>

<h3 id="ä»£ç å®ç°-2">ä»£ç å®ç°</h3>

<h4 id="go-3">Go</h4>

<pre><code>func reinitializePermutation(n int) int {
    if n == 2 {
        return 1
    }

    steps := 0
    pos := 1  // è·Ÿè¸ªå…ƒç´ 1çš„ä½ç½®

    for {
        // æ ¹æ®å½“å‰ä½ç½®è®¡ç®—ä¸‹ä¸€ä¸ªä½ç½®
        if pos &lt; n/2 {
            pos = 2 * pos
        } else {
            pos = 2 * (pos - n/2) + 1
        }

        steps++

        // å½“å…ƒç´ 1å›åˆ°ä½ç½®1æ—¶ï¼Œæ•´ä¸ªæ’åˆ—æ¢å¤
        if pos == 1 {
            return steps
        }
    }
}
</code></pre>

<h4 id="c-3">C++</h4>

<pre><code>class Solution {
public:
    int reinitializePermutation(int n) {
        if (n == 2) return 1;

        int steps = 0;
        int pos = 1;  // è·Ÿè¸ªå…ƒç´ 1çš„ä½ç½®

        do {
            // æ ¹æ®å½“å‰ä½ç½®è®¡ç®—ä¸‹ä¸€ä¸ªä½ç½®
            if (pos &lt; n / 2) {
                pos = 2 * pos;
            } else {
                pos = 2 * (pos - n / 2) + 1;
            }
            steps++;
        } while (pos != 1);

        return steps;
    }
};
</code></pre>

<h2 id="è§£æ³•ä¸‰æ•°å­¦å…¬å¼æ³•">è§£æ³•ä¸‰ï¼šæ•°å­¦å…¬å¼æ³•</h2>

<h3 id="æ€è·¯-3">æ€è·¯</h3>

<p>è§‚å¯Ÿå˜æ¢å…¬å¼ï¼š<code>f(i) = (2*i) % (n-1)</code>ï¼Œå¯¹äº <code>i âˆˆ [1, n-2]</code>
- å…ƒç´  <code>0</code> å’Œ <code>n-1</code> å§‹ç»ˆä¸å˜
- æˆ‘ä»¬éœ€è¦æ‰¾åˆ°æœ€å°çš„ <code>k</code> ä½¿å¾— <code>(2^k * 1) % (n-1) = 1</code></p>

<p>è¿™ç­‰ä»·äºæ±‚ <code>2^k â‰¡ 1 (mod n-1)</code> çš„æœ€å°æ­£æ•´æ•°è§£ <code>k</code>ã€‚</p>

<h3 id="å¤æ‚åº¦åˆ†æ-3">å¤æ‚åº¦åˆ†æ</h3>

<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(log n)</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li>
</ul>

<h3 id="ä»£ç å®ç°-3">ä»£ç å®ç°</h3>

<h4 id="go-4">Go</h4>

<pre><code>func reinitializePermutation(n int) int {
    if n == 2 {
        return 1
    }

    steps := 1
    powerOfTwo := 2 % (n - 1)

    for powerOfTwo != 1 {
        powerOfTwo = (powerOfTwo * 2) % (n - 1)
        steps++
    }

    return steps
}
</code></pre>

<h4 id="c-4">C++</h4>

<pre><code>class Solution {
public:
    int reinitializePermutation(int n) {
        if (n == 2) return 1;

        int steps = 1;
        int powerOfTwo = 2 % (n - 1);

        while (powerOfTwo != 1) {
            powerOfTwo = (powerOfTwo * 2) % (n - 1);
            steps++;
        }

        return steps;
    }
};
</code></pre>

<h2 id="è§£æ³•å¯¹æ¯”">è§£æ³•å¯¹æ¯”</h2>

<table>
<thead>
<tr>
  <th>è§£æ³•</th>
  <th>æ—¶é—´å¤æ‚åº¦</th>
  <th>ç©ºé—´å¤æ‚åº¦</th>
  <th>ä¼˜ç‚¹</th>
  <th>ç¼ºç‚¹</th>
</tr>
</thead>
<tbody>
<tr>
  <td>æ¨¡æ‹Ÿå˜æ¢</td>
  <td>O(n*k)</td>
  <td>O(n)</td>
  <td>ç›´è§‚ï¼Œæ˜“äºç†è§£</td>
  <td>æ•ˆç‡ä½ï¼Œnè¾ƒå¤§æ—¶æ…¢</td>
</tr>
<tr>
  <td>è·Ÿè¸ªå•ä¸ªå…ƒç´ </td>
  <td>O(k)</td>
  <td>O(1)</td>
  <td>æ•ˆç‡é«˜ï¼Œç©ºé—´ä¼˜</td>
  <td>éœ€è¦æ•°å­¦æ´å¯Ÿ</td>
</tr>
<tr>
  <td>æ•°å­¦å…¬å¼æ³•</td>
  <td>O(log n)</td>
  <td>O(1)</td>
  <td>æ•ˆç‡æœ€é«˜</td>
  <td>éœ€è¦æ•°å­¦æ¨å¯¼ï¼Œä¸æ˜“ç†è§£</td>
</tr>
</tbody>
</table>

<h2 id="æ¨èè§£æ³•">æ¨èè§£æ³•</h2>

<p><strong>è§£æ³•äºŒï¼ˆè·Ÿè¸ªå•ä¸ªå…ƒç´ ï¼‰</strong> æ˜¯æœ€ä½³é€‰æ‹©ï¼š
1. æ•ˆç‡é«˜ï¼šO(k) æ—¶é—´å¤æ‚åº¦ï¼Œk é€šå¸¸è¿œå°äº n
2. ç©ºé—´ä¼˜ï¼šO(1) ç©ºé—´å¤æ‚åº¦
3. æ˜“äºå®ç°ï¼šä»£ç ç®€æ´ï¼Œé€»è¾‘æ¸…æ™°
4. ä¸éœ€è¦å¤æ‚çš„æ•°å­¦æ¨å¯¼</p>

<p>å¯¹äºæœ¬é¢˜ï¼Œç”±äº n æœ€å¤§ä¸º 1000ï¼Œæ‰€æœ‰è§£æ³•éƒ½èƒ½é€šè¿‡ï¼Œä½†è§£æ³•äºŒåœ¨æ•ˆç‡å’Œå®ç°éš¾åº¦ä¸Šå–å¾—äº†æœ€ä½³å¹³è¡¡ã€‚</p>

<hr />

<p><em>è·å–æ—¶é—´: 2026-02-26 18:46:54</em></p>

                </div>
            </div>

            <div class="footer">
                <p>ç”± <a href="https://github.com/LFrankl/leetcode" target="_blank">LeetCode Daily Script</a> è‡ªåŠ¨ç”Ÿæˆ</p>
                <p>AI è§£ç­”ç”± <a href="https://www.deepseek.com/" target="_blank">DeepSeek</a> æä¾›</p>
            </div>
        </div>
    </div>

    <!-- æµ®åŠ¨è¿”å›æŒ‰é’® -->
    <button class="fab-back" onclick="history.back()" aria-label="è¿”å›é¢˜ç›®åˆ—è¡¨">
        â†‘
    </button>
</body>
</html>